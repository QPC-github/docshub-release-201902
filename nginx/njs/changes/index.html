
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Changes - Nginx - W3cubDocs</title>
  
  <meta name="description" content=" Release Date&#58; 30 October 2018 ">
  <meta name="keywords" content="changes, -, nginx">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/nginx/njs/changes/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/nginx.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/nginx/" class="_nav-link" title="" style="margin-left:0;">nginx</a></span>
  
  <nav class="_nav">
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _nginx">
				
				
<h1>Changes</h1>
<h4 id="njs0.2.5">Changes with 0.2.5</h4>
<p> Release Date: 30 October 2018 </p>
<p> nginx modules: </p> <ul class="compact"> <li> <p> Bugfix: fixed counting pending events in stream module. </p> </li> <li> <p> Bugfix: fixed <code>s.off()</code> in stream module. </p> </li> <li> <p> Bugfix: fixed processing of data chunks in <code>js_filter</code> in stream module. </p> </li> <li> <p> Bugfix: fixed http <code>status</code> and <code>contentType</code> getter in http module. </p> </li> <li> <p> Bugfix: fixed http response and parent getters in http module. </p> </li> </ul>

<p> Core: </p> <ul class="compact"> <li> <p> Feature: arguments object support. </p> </li> <li> <p> Feature: non-integer fractions support. </p> </li> <li> <p> Improvement: handling non-array values in <code>Array.prototype.slice()</code>. </p> </li> <li> <p> Bugfix: fixed <code>Array.prototype.length</code> setter </p> </li> <li> <p> Bugfix: fixed <code>njs_array_alloc()</code> for length &gt; 2**31. </p> </li> <li> <p> Bugfix: handling int overflow in <code>njs_array_alloc()</code> on 32bit archs. </p> </li> <li> <p> Bugfix: fixed code size mismatch error message. </p> </li> <li> <p> Bugfix: fixed delete operator in a loop. </p> </li> <li> <p> Bugfix: fixed <code>Object.getOwnPropertyDescriptor()</code> for complex object (inherited from <code>Array</code> and <code>string</code> values). </p> </li> <li> <p> Bugfix: fixed <code>Object.prototype.hasOwnProperty()</code> for non-object properties </p> </li> <li> <p> Bugfix: miscellaneous additional bugs have been fixed. </p> </li> </ul>

<h4 id="njs0.2.4">Changes with 0.2.4</h4>
<p> Release Date: 18 September 2018 </p>
<p> nginx modules: </p> <ul class="compact"> <li> <p> Change: stream module handlers refactored. </p> <p> New methods and properties: <a href="../reference/#s_on">s.on()</a>, <a href="../reference/#s_off">s.off()</a>, <a href="../reference/#s_allow">s.allow()</a>, <a href="../reference/#s_done">s.done()</a>, <a href="../reference/#s_decline">s.decline()</a>, <a href="../reference/#s_deny">s.deny()</a>. </p> <p> Removed properties of the <a href="../reference/#stream">Stream</a> object: <code>s.OK</code>, <code>s.ABORT</code>, <code>s.AGAIN</code>, <code>s.DECLINED</code>, <code>s.ERROR</code> (replaced with <a href="../reference/#s_allow">s.allow()</a>, <a href="../reference/#s_done">s.done()</a>, <a href="../reference/#s_deny">s.deny()</a>). </p> <p> <code>s.buffer</code> (for reading replaced with data argument of the corresponding callback, for writing use <a href="../reference/#s_send">s.send()</a>). </p> <p> <code>s.fromUpstream</code> (replaced with a callback for a corresponding event). </p> <p> <code>s.eof</code> (replaced with  <a href="../reference/#s_on_callback_last">flags.last</a>). </p> </li> </ul>

<p> Core: </p> <ul class="compact"> <li> <p> Feature: added <code>Function.prototype.length</code>. </p> </li> <li> <p> Feature: introduced sandboxing mode. </p> </li> <li> <p> Improvement: added exception strings where appropriate. </p> </li> <li> <p> Improvement: improved wording for primitive type conversion exception. </p> </li> <li> <p> Bugfix: throwing <code>TypeError</code> for attempts to change frozen properties. </p> </li> <li> <p> Bugfix: fixed <code>Object.defineProperty()</code> for existing properties. </p> </li> <li> <p> Bugfix: respecting the enumerable attribute while iterating by for in. </p> </li> <li> <p> Bugfix: respecting writable attribute for property handlers. </p> </li> <li> <p> Bugfix: fixed exception handling in arguments of a function. </p> </li> <li> <p> Bugfix: fixed <code>Object.prototype.toString</code> for different value types. </p> </li> <li> <p> Bugfix: fixed <code>Object()</code> constructor for object types arguments. </p> </li> <li> <p> Bugfix: fixed comparison of objects and strings. </p> </li> <li> <p> Bugfix: fixed <code>String.slice()</code> for undefined arguments. </p> </li> <li> <p> Bugfix: miscellaneous additional bugs have been fixed. </p> </li> </ul>

<h4 id="njs0.2.3">Changes with 0.2.3</h4>
<p> Release Date: 31 July 2018 </p>
<p> nginx modules: </p> <ul class="compact"> <li> <p> Bugfix: making a subrequest from a <code>Reply</code> object caused a segmentation fault. </p> </li> <li> <p> Bugfix: getting the parent property of the main <a href="../reference/#http">HTTP Request</a> object caused a segmentation fault. </p> </li> </ul>

<p> Core: </p> <ul class="compact"> <li> <p> Feature: added the pretty string representation for values. </p> </li> <li> <p> Feature: correctly printing floating point numbers. </p> </li> <li> <p> Feature: correctly parsing floating point numbers. </p> </li> <li> <p> Feature: <a href="../reference/#string_bytesfrom">String.bytesFrom()</a> method (decoding <code>hex</code>, <code>base64</code>, <code>base64url</code> into a byte string). </p> </li> <li> <p> Feature: <a href="../reference/#string_padstart">String.padStart()</a> and <a href="../reference/#string_padend">String.padEnd()</a> methods. </p> </li> <li> <p> Feature: added support of binary literals. </p> </li> <li> <p> Improvement: added information about illegal token in number parsing. </p> </li> <li> <p> Improvement: allowed uppercased <code>O</code> in octal literal values. </p> </li> <li> <p> Improvement: added support for multiple arguments in <code>console.log()</code>. </p> </li> <li> <p> Bugfix: fixed applying <code>call()</code> to methods of external values. </p> </li> <li> <p> Bugfix: fixed addition operator applied to an object. </p> </li> <li> <p> Bugfix: fixed exception handling in <code>njs_vm_value_to_ext_string()</code>. </p> </li> <li> <p> Bugfix: fixed <code>Number()</code> with boolean, null and undefined arguments. </p> </li> <li> <p> Bugfix: fixed error handling of setting non-numeric <code>Array.length</code>. </p> </li> <li> <p> Bugfix: fixed autocompletion for global objects. </p> </li> <li> <p> Bugfix: miscellaneous additional bugs have been fixed. </p> </li> </ul>

<h4 id="njs0.2.2">Changes with 0.2.2</h4>
<p> Release Date: 19 June 2018 </p>
<p> nginx modules: </p> <ul class="compact"> <li> <p> Change: merged HTTP <code>Response</code> and <code>Reply</code> into <a href="../reference/#http">HTTP Request</a>. New members of <code>Request</code>: </p> <ul class="compact"> <li> <p> <code>req.status</code> (<code>res.status</code>) </p> </li> <li> <p> <code>req.parent</code> (<code>reply.parent</code>) </p> </li> <li> <p> <code>req.requestBody</code> (<code>req.body</code>) </p> </li> <li> <p> <code>req.responseBody</code> (<code>reply.body</code>) </p> </li> <li> <p> <code>req.headersIn</code> (<code>req.headers</code>) </p> </li> <li> <p> <code>req.headersOut</code> (<code>res.headers</code>) </p> </li> <li> <p> <code>req.sendHeader()</code> (<code>res.sendHeader()</code>) </p> </li> <li> <p> <code>req.send()</code> (<code>res.send()</code>) </p> </li> <li> <p> <code>req.finish()</code> (<code>res.finish()</code>) </p> </li> <li> <p> <code>req.return()</code> (<code>res.return()</code>) </p> </li> </ul>
<p> Deprecated members of <code>Request</code>: </p> <ul class="compact"> <li> <p> <code>req.body</code> (use <code>req.requestBody</code> or <code>req.responseBody</code>) </p> </li> <li> <p> <code>req.headers</code> (use <code>req.headersIn</code> or <code>req.headersOut</code>) </p> </li> <li> <p> <code>req.response</code> </p> </li> </ul>
<p> The deprecated properties will be removed in next releases. </p> </li> <li> <p> Feature: HTTP <a href="../reference/#r_internal_redirect">internalRedirect()</a> method. </p> </li> </ul>

<p> Core: </p> <ul class="compact"> <li> <p> Bugfix: fixed heap-buffer-overflow in <code>crypto.createHmac()</code>. </p> </li> </ul>

<h4 id="njs0.2.1">Changes with 0.2.1</h4>
<p> Release Date: 31 May 2018 </p>
<p> nginx modules: </p> <ul class="compact"> <li> <p> Feature: HTTP request body getter. </p> </li> <li> <p> Improvement: moved njs vm to the <code>main</code> configuration. </p> </li> <li> <p> Improvement: improved logging for <a href="../../http/ngx_http_js_module/#js_set">js_set</a> and <a href="../../http/ngx_http_js_module/#js_content">js_content</a> directives. </p> </li> <li> <p> Improvement: setting status code to 500 by default in the <a href="../../http/ngx_http_js_module/#js_content">js_content</a> handler </p> </li> <li> <p> Improvement: added the debug for the returned status code in <a href="../../http/ngx_http_js_module/#js_content">js_content</a> handler </p> </li> <li> <p> Bugfix: fixed error logging in <a href="../../http/ngx_http_js_module/#js_include">js_include</a>. </p> </li> </ul>

<p> Core: </p> <ul class="compact"> <li> <p> Feature: added array length setter. </p> </li> <li> <p> Improvement: public header <code>cleanup. njscript.h</code> is renamed to <code>njs.h</code>. </p> </li> <li> <p> Bugfix: fixed crypto <code>update()</code> method after <code>digest()</code> is called. </p> </li> <li> <p> Bugfix: fixed <code>crypto.createHmac()</code> for keys with size &lt;= alg size and &gt; 64. </p> </li> <li> <p> Bugfix: fixed <code>JSON.stringify()</code> for arrays with empty cells. </p> </li> <li> <p> Bugfix: fixed exception type for unsupported types in <code>JSON.stringify()</code>. </p> </li> <li> <p> Bugfix: fixed handling of undefined arguments of functions. </p> </li> <li> <p> Bugfix: fixed handling of missing <code>arg</code> of <code>Object.getOwnPropertyDescriptor()</code>. </p> </li> <li> <p> Bugfix: fixed handling of properties in <code>Object.getOwnPropertyDescriptor()</code>. </p> </li> <li> <p> Bugfix: fixed the writeable flag of <code>Array.length</code> property. </p> </li> <li> <p> Bugfix: fixed return value type of <code>clearTimeout()</code>. </p> </li> <li> <p> Bugfix: fixed <code>njs_vm_external_bind()</code>. </p> </li> <li> <p> Bugfix: miscellaneous additional bugs have been fixed. </p> </li> </ul>

<h4 id="njs0.2.0">Changes with 0.2.0</h4>
<p> Release Date: 3 Apr 2018 </p>
 <ul class="compact"> <li> <p> Feature: reporting njs version by CLI. </p> </li> <li> <p> Feature: textual description for type converting exceptions. </p> </li> <li> Feature: <code>setTimeout()</code> and <code>clearTimeout()</code> methods. </li> <li> <p> Feature: Byte string to <code>hex</code>, <code>base64</code>, <code>base64url</code> encodings. </p> </li> <li> <p> Feature: <a href="https://nodejs.org/api/crypto.html#crypto_class_hash" target="_blank">Node.js style</a> <code>Crypto</code> methods. </p> </li> <li> <p> Feature: HTTP and stream <code>warn()</code> and <code>error()</code> methods. </p> </li> <li> <p> Feature: HTTP <code>subrequest()</code> method. </p> </li> <li> <p> Feature: HTTP <code>return()</code> method. </p> </li> <li> <p> Bugfix: miscellaneous bugs have been fixed in the core and interactive shell. </p> </li> </ul>

<h4 id="njs0.1.15">Changes with 0.1.15</h4>
<p> Release Date: 20 Nov 2017 </p>
 <ul class="compact"> <li> <p> Feature: <code>Error</code>, <code>EvalError</code>, <code>InternalError</code>, <code>RangeError</code>, <code>ReferenceError</code>, <code>SyntaxError</code>, <code>TypeError</code>, <code>URIError</code> objects. </p> </li> <li> <p> Feature: octal literals support. </p> </li> <li> <p> Feature: <a href="https://nodejs.org/api/fs.html#fs_file_system" target="_blank">Node.js style</a> <code>File system</code> access methods: <code>fs.readFile()</code>, <code>fs.readFileSync()</code>, <code>fs.appendFile()</code>, <code>fs.appendFileSync()</code>, <code>fs.writeFile()</code>, <code>fs.writeFileSync()</code>. </p> </li> <li> <p> Feature: nginx modules print backtrace on exception. </p> </li> <li> <p> Bugfix: miscellaneous bugs have been fixed. </p> </li> </ul>

<h4 id="njs0.1.14">Changes with 0.1.14</h4>
<p> Release Date: 09 Oct 2017 </p>
 <ul class="compact"> <li> <p> Feature: JSON object. </p> </li> <li> <p> Feature: object level completions in interactive shell. </p> </li> <li> <p> Feature: various configure improvements. </p> </li> <li> <p> Bugfix: miscellaneous bugs have been fixed in the core and interactive shell. </p> </li> </ul>

<h4 id="njs0.1.13">Changes with 0.1.13</h4>
<p> Release Date: 31 Aug 2017 </p>
 <ul class="compact"> <li> <p> Feature: <code>console.log()</code> and <code>console.help()</code> methods in interactive shell. </p> </li> <li> <p> Feature: interactive shell prints backtrace on exception. </p> </li> <li> <p> Feature: interactive shell by default if <code>libedit</code> is available. </p> </li> <li> <p> Bugfix: processing of large files from <code>stdin</code> in command line mode. </p> </li> <li> <p> Bugfix: improved <code>editline</code> detection. </p> </li> </ul>

<h4 id="njs0.1.12">Changes with 0.1.12</h4>
<p> Release Date: 08 Aug 2017 </p>
 <ul class="compact"> <li> <p> Feature: Interactive shell. </p> </li> <li> <p> Bugfix: in <code>Object.isSealed()</code>. </p> </li> </ul>

<h4 id="njs0.1.11">Changes with 0.1.11</h4>
<p> Release Date: 27 Jun 2017 </p>
 <ul class="compact"> <li> <p> Feature: <code>Object.keys()</code>, <code>Object.prototype.hasOwnProperty()</code> methods. </p> </li> <li> <p> Feature: <code>Object.defineProperty()</code>, <code>Object.defineProperties()</code>, <code>Object.getOwnPropertyDescriptor()</code> methods. </p> </li> <li> <p> Feature: <code>Object.getPrototypeOf()</code>, <code>Object.prototype.isPrototypeOf()</code> methods. </p> </li> <li> <p> Feature: <code>Object.preventExtensions()</code>, <code>Object.isExtensible()</code>, <code>Object.freeze()</code>, <code>Object.isFrozen()</code>, <code>Object.seal()</code>, <code>Object.isSealed()</code> methods. </p> </li> <li> <p> Feature: scientific notation (<code>3.35e10</code>) literals support. </p> </li> <li> <p> Feature: hexadecimal (<code>0x1123</code>) literals support. </p> </li> <li> <p> Bugfix: processing of large array indexes. </p> </li> <li> <p> Bugfix: in <code>parseInt()</code> and <code>Date.parse()</code>. </p> </li> </ul>

<h4 id="njs0.1.10">Changes with 0.1.10</h4>
<p> Release Date: 04 Apr 2017 </p>
 <ul class="compact"> <li> <p> Feature: nested functions and function closures. </p> </li> <li> <p> Feature: <code>Array.of()</code>, <code>Array.prototype.fill()</code>, <code>Array.prototype.find()</code>, <code>Array.prototype.findIndex()</code> methods. </p> </li> <li> <p> Bugfix: miscellaneous bugs and segmentation faults have been fixed. </p> </li> </ul>

<h4 id="njs0.1.9">Changes with 0.1.9</h4>
<p> Release Date: 01 Feb 2017 </p>
 <ul class="compact"> <li> <p> Bugfix: global variables were not initialized when njs was used in nginx. </p> </li> </ul>

<h4 id="njs0.1.8">Changes with 0.1.8</h4>
<p> Release Date: 24 Jan 2017 </p>
 <ul class="compact"> <li> <p> Change: the <code>strict</code> mode is enforced, variables must be explicitly declared. </p> </li> <li> <p> Feature: <code>for</code> and <code>for-in</code> loops support variable declaration. </p> </li> <li> <p> Bugfix: global and function scopes have been fixed. </p> </li> <li> <p> Bugfix: now <code>for-in</code> loop does not discard the last value of property variable. </p> </li> <li> <p> Bugfix: miscellaneous bugs and segmentation faults have been fixed. </p> </li> </ul>

<h4 id="njs0.1.7">Changes with 0.1.7</h4>
<p> Release Date: 27 Dec 2016 </p>
 <ul class="compact"> <li> <p> Change: the <a href="../../http/ngx_http_js_module/#js_include">js_include</a> directive has been disabled at server and location levels. </p> </li> <li> <p> Feature: exponentiation operators. </p> </li> <li> <p> Bugfix: miscellaneous bugs and segmentation faults have been fixed. </p> </li> </ul>

<h4 id="njs0.1.6">Changes with 0.1.6</h4>
<p> Release Date: 13 Dec 2016 </p>
 <ul class="compact"> <li> <p> Change: the <a href="../../http/ngx_http_js_module/#js_set">js_set</a> directive has been disabled at server and location levels. </p> </li> <li> <p> Feature: ES6 <code>Math</code> methods. </p> </li> <li> <p> Bugfix: miscellaneous bugs and segmentation faults have been fixed. </p> </li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2002-2018 Igor Sysoev<br>© 2011-2018 Nginx, Inc.<br>Licensed under the BSD License.<br>
    <a href="https://nginx.org/en/docs/njs/changes.html" class="_attribution-link" target="_blank">https://nginx.org/en/docs/njs/changes.html</a>
  </p>
</div>

				<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
