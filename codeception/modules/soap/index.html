
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>SOAP - Codeception - W3cubDocs</title>
  
  <meta name="description" content=" Module for testing SOAP WSDL web services. Send requests and check if response matches the pattern. ">
  <meta name="keywords" content="soap, -, codeception">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/codeception/modules/soap/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/codeception.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/codeception/" class="_nav-link" title="" style="margin-left:0;">Codeception</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _codeception">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 id="soap">SOAP</h1> <p>Module for testing SOAP WSDL web services. Send requests and check if response matches the pattern.</p> <p>This module can be used either with frameworks or PHPBrowser. It tries to guess the framework is is attached to. If a endpoint is a full url then it uses PHPBrowser.</p> <h3 id="using-inside-framework">Using Inside Framework</h3> <p>Please note, that PHP SoapServer::handle method sends additional headers. This may trigger warning: “Cannot modify header information” If you use PHP SoapServer with framework, try to block call to this method in testing environment.</p> <h2 id="status">Status</h2> <ul> <li>Maintainer: <strong>davert</strong>
</li> <li>Stability: <strong>stable</strong>
</li> <li>Contact: codecept@davert.mail.ua</li> </ul> <h2 id="configuration">Configuration</h2> <ul> <li>endpoint <em>required</em> - soap wsdl endpoint</li> <li>SOAPAction - replace SOAPAction HTTP header (Set to ‘’ to SOAP 1.2)</li> </ul> <h2 id="public-properties">Public Properties</h2> <ul> <li>xmlRequest - last SOAP request (DOMDocument)</li> <li>xmlResponse - last SOAP response (DOMDocument)</li> </ul> <h2 id="actions">Actions</h2> <h3 id="dontseesoapresponsecontainsstructure">dontSeeSoapResponseContainsStructure</h3> <p>Opposite to <code class="highlighter-rouge">seeSoapResponseContainsStructure</code></p> <ul> <li>
<code class="highlighter-rouge">param</code> $xml</li> </ul> <h3 id="dontseesoapresponsecontainsxpath">dontSeeSoapResponseContainsXPath</h3> <p>Checks XML response doesn’t contain XPath locator</p> <pre data-language="php">&lt;?php
$I-&gt;dontSeeSoapResponseContainsXPath('//root/user[@id=1]');
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param</code> $xpath</li> </ul> <h3 id="dontseesoapresponseequals">dontSeeSoapResponseEquals</h3> <p>Checks XML response equals provided XML. Comparison is done by canonicalizing both xml`s.</p> <p>Parameter can be passed either as XmlBuilder, DOMDocument, DOMNode, XML string, or array (if no attributes).</p> <ul> <li>
<code class="highlighter-rouge">param</code> $xml</li> </ul> <h3 id="dontseesoapresponseincludes">dontSeeSoapResponseIncludes</h3> <p>Checks XML response does not include provided XML. Comparison is done by canonicalizing both xml`s. Parameter can be passed either as XmlBuilder, DOMDocument, DOMNode, XML string, or array (if no attributes).</p> <ul> <li>
<code class="highlighter-rouge">param</code> $xml</li> </ul> <h3 id="grabattributefrom">grabAttributeFrom</h3> <p>Finds and returns attribute of element. Element is matched by either CSS or XPath</p> <ul> <li>
<code class="highlighter-rouge">Available since</code> 1.1</li> <li>
<code class="highlighter-rouge">param</code> $cssOrXPath</li> <li>
<code class="highlighter-rouge">param</code> $attribute</li> <li>
<code class="highlighter-rouge">return</code> string</li> </ul> <h3 id="grabtextcontentfrom">grabTextContentFrom</h3> <p>Finds and returns text contents of element. Element is matched by either CSS or XPath</p> <ul> <li>
<code class="highlighter-rouge">Available since</code> 1.1</li> <li>
<code class="highlighter-rouge">param</code> $cssOrXPath</li> <li>
<code class="highlighter-rouge">return</code> string</li> </ul> <h3 id="havesoapheader">haveSoapHeader</h3> <p>Prepare SOAP header. Receives header name and parameters as array.</p> <p>Example:</p> <pre data-language="php">&lt;?php
$I-&gt;haveSoapHeader('AuthHeader', array('username' =&gt; 'davert', 'password' =&gt; '123345'));</pre> <p>Will produce header:</p> <pre data-language="yaml">   &lt;soapenv:Header&gt;
     &lt;SessionHeader&gt;
     &lt;AuthHeader&gt;
         &lt;username&gt;davert&lt;/username&gt;
         &lt;password&gt;12345&lt;/password&gt;
     &lt;/AuthHeader&gt;
  &lt;/soapenv:Header&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param</code> $header</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> </ul> <h3 id="seeresponsecodeis">seeResponseCodeIs</h3> <p>@deprecated use seeSoapResponseCodeIs instead</p> <h3 id="seesoapresponsecodeis">seeSoapResponseCodeIs</h3> <p>Checks response code from server.</p> <ul> <li>
<code class="highlighter-rouge">param</code> $code</li> </ul> <h3 id="seesoapresponsecontainsstructure">seeSoapResponseContainsStructure</h3> <p>Checks XML response contains provided structure. Response elements will be compared with XML provided. Only nodeNames are checked to see elements match.</p> <p>Example:</p> <pre data-language="php">&lt;?php

$I-&gt;seeSoapResponseContainsStructure("&lt;query&gt;&lt;name&gt;&lt;/name&gt;&lt;/query&gt;");
?&gt;</pre> <p>Use this method to check XML of valid structure is returned. This method does not use schema for validation. This method does not require path from root to match the structure.</p> <ul> <li>
<code class="highlighter-rouge">param</code> $xml</li> </ul> <h3 id="seesoapresponsecontainsxpath">seeSoapResponseContainsXPath</h3> <p>Checks XML response with XPath locator</p> <pre data-language="php">&lt;?php
$I-&gt;seeSoapResponseContainsXPath('//root/user[@id=1]');
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param</code> $xpath</li> </ul> <h3 id="seesoapresponseequals">seeSoapResponseEquals</h3> <p>Checks XML response equals provided XML. Comparison is done by canonicalizing both xml`s.</p> <p>Parameters can be passed either as DOMDocument, DOMNode, XML string, or array (if no attributes).</p> <p>Example:</p> <pre data-language="php">&lt;?php
$I-&gt;seeSoapResponseEquals("&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;SOAP-ENV:Envelope&gt;&lt;SOAP-ENV:Body&gt;&lt;result&gt;1&lt;/result&gt;&lt;/SOAP-ENV:Envelope&gt;");

$dom = new \DOMDocument();
$dom-&gt;load($file);
$I-&gt;seeSoapRequestIncludes($dom);</pre> <ul> <li>
<code class="highlighter-rouge">param</code> $xml</li> </ul> <h3 id="seesoapresponseincludes">seeSoapResponseIncludes</h3> <p>Checks XML response includes provided XML. Comparison is done by canonicalizing both xml`s. Parameter can be passed either as XmlBuilder, DOMDocument, DOMNode, XML string, or array (if no attributes).</p> <p>Example:</p> <pre data-language="php">&lt;?php
$I-&gt;seeSoapResponseIncludes("&lt;result&gt;1&lt;/result&gt;");
$I-&gt;seeSoapRequestIncludes(\Codeception\Utils\Soap::response()-&gt;result-&gt;val(1));

$dom = new \DDOMDocument();
$dom-&gt;load('template.xml');
$I-&gt;seeSoapRequestIncludes($dom);
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param</code> $xml</li> </ul> <h3 id="sendsoaprequest">sendSoapRequest</h3> <p>Submits request to endpoint.</p> <p>Requires of api function name and parameters. Parameters can be passed either as DOMDocument, DOMNode, XML string, or array (if no attributes).</p> <p>You are allowed to execute as much requests as you need inside test.</p> <p>Example:</p> <pre data-language="php">$I-&gt;sendSoapRequest('UpdateUser', '&lt;user&gt;&lt;id&gt;1&lt;/id&gt;&lt;name&gt;notdavert&lt;/name&gt;&lt;/user&gt;');
$I-&gt;sendSoapRequest('UpdateUser', \Codeception\Utils\Soap::request()-&gt;user
  -&gt;id-&gt;val(1)-&gt;parent()
  -&gt;name-&gt;val('notdavert');</pre> <ul> <li>
<code class="highlighter-rouge">param</code> $request</li> <li>
<code class="highlighter-rouge">param</code> $body</li> </ul> <div class="_attribution">
  <p class="_attribution-p">
    © 2011 Michael Bodnarchuk and contributors<br>Licensed under the MIT License.<br>
    <a href="https://codeception.com/docs/modules/SOAP" class="_attribution-link" target="_blank">https://codeception.com/docs/modules/SOAP</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
