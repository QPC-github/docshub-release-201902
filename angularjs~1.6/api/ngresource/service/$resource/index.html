
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ngResource.&#36;resource - Angular.js 1.6 - W3cubDocs</title>
  
  <meta name="description" content=" A factory which creates a resource object that lets you interact with RESTful server-side data sources. ">
  <meta name="keywords" content="&#36;resource, ngresource, -, angular, js, angularjs~1.6">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/angularjs~1.6/api/ngresource/service/$resource/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/angularjs~1.6.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/angularjs~1.6/" class="_nav-link" title="" style="margin-left:0;">Angular.js 1.6</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _angularjs">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 class="api-profile-header-heading">
<a href="https://github.com/angular/angular.js/edit/v1.6.x/src/ngResource/resource.js?message=docs(%24resource)%3A%20describe%20your%20change...#L76" class="improve-docs btn btn-primary" target="_blank">Improve this Doc</a><a href="https://github.com/angular/angular.js/tree/v1.6.6/src/ngResource/resource.js#L76" class="view-source pull-right btn btn-primary" target="_blank"> View Source </a>$resource</h1> <ol class="api-profile-header-structure naked-list step-list"> <li> <a href="../../provider/%24resourceprovider/">$resourceProvider</a> </li> <li> service in module <a href="../../../ngresource/">ngResource</a> </li> </ol>  <div class="api-profile-description"> <p>A factory which creates a resource object that lets you interact with <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer" target="_blank">RESTful</a> server-side data sources.</p> <p>The returned resource object has action methods which provide high-level behaviors without the need to interact with the low level <a href="../../../ng/service/%24http/">$http</a> service.</p> <p>Requires the <a href="../../../ngresource/"><code>ngResource</code></a> module to be installed.</p> <p>By default, trailing slashes will be stripped from the calculated URLs, which can pose problems with server backends that do not expect that behavior. This can be disabled by configuring the <code>$resourceProvider</code> like this:</p> <pre data-language="javascript">app.config(['$resourceProvider', function($resourceProvider) {
  // Don't strip trailing slashes from calculated URLs
  $resourceProvider.defaults.stripTrailingSlashes = false;
}]);
</pre> </div> <div> <h2 id="dependencies">Dependencies</h2> <ul> <li><a href="../../../ng/service/%24http/"><code>$http</code></a></li>
<li><a href="../../../ng/service/%24log/"><code>$log</code></a></li>
<li><a href="../../../ng/service/%24q/"><code>$q</code></a></li>
<li><a href="../../../ng/service/%24timeout/"><code>$timeout</code></a></li> </ul> <h2 id="usage">Usage</h2> <p><code>$resource(url, [paramDefaults], [actions], options);</code></p> <section class="api-section"> <h3>Arguments</h3> <table class="variables-matrix input-arguments"> <thead> <tr> <th>Param</th> <th>Type</th> <th>Details</th> </tr> </thead> <tbody> <tr> <td> url </td> <td> <code class="label type-hint type-hint-string">string</code> </td> <td> <p>A parameterized URL template with parameters prefixed by <code>:</code> as in <code>/user/:username</code>. If you are using a URL with a port number (e.g. <code>http://example.com:8080/api</code>), it will be respected.</p> <p> If you are using a url with a suffix, just add the suffix, like this: <code>$resource('http://example.com/resource.json')</code> or <code>$resource('http://example.com/:id.json')</code> or even <code>$resource('http://example.com/resource/:resource_id.:format')</code> If the parameter before the suffix is empty, :resource_id in this case, then the <code>/.</code> will be collapsed down to a single <code>.</code>. If you need this sequence to appear and not collapse then you can escape it with <code>/\.</code>.</p> </td> </tr> <tr> <td> paramDefaults <div><em>(optional)</em></div> </td> <td> <code class="label type-hint type-hint-object">Object</code> </td> <td> <p>Default values for <code>url</code> parameters. These can be overridden in <code>actions</code> methods. If a parameter value is a function, it will be called every time a param value needs to be obtained for a request (unless the param was overridden). The function will be passed the current data value as an argument.</p> <p> Each key value in the parameter object is first bound to url template if present and then any excess keys are appended to the url search query after the <code>?</code>.</p> <p> Given a template <code>/path/:verb</code> and parameter <code>{verb:'greet', salutation:'Hello'}</code> results in URL <code>/path/greet?salutation=Hello</code>.</p> <p> If the parameter value is prefixed with <code>@</code>, then the value for that parameter will be extracted from the corresponding property on the <code>data</code> object (provided when calling actions with a request body). For example, if the <code>defaultParam</code> object is <code>{someParam: '@someProp'}</code> then the value of <code>someParam</code> will be <code>data.someProp</code>. Note that the parameter will be ignored, when calling a "GET" action method (i.e. an action method that does not accept a request body)</p> </td> </tr> <tr> <td> actions <div><em>(optional)</em></div> </td> <td> <code class="label type-hint type-hint-object">Object.&lt;Object&gt;=</code> </td> <td> <p>Hash with declaration of custom actions that will be available in addition to the default set of resource actions (see below). If a custom action has the same key as a default action (e.g. <code>save</code>), then the default action will be <em>overwritten</em>, and not extended.</p> <p> The declaration should be created in the format of <a href="../../../ng/service/%24http/#usage.html">$http.config</a>:</p> <pre>{action1: {method:?, params:?, isArray:?, headers:?, ...},
 action2: {method:?, params:?, isArray:?, headers:?, ...},
 ...}
</pre> <p> Where:</p> <ul> <li>
<strong><code>action</code></strong> – {string} – The name of action. This name becomes the name of the method on your resource object.</li> <li>
<strong><code>method</code></strong> – {string} – Case insensitive HTTP method (e.g. <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>, <code>JSONP</code>, etc).</li> <li>
<strong><code>params</code></strong> – {Object=} – Optional set of pre-bound parameters for this action. If any of the parameter value is a function, it will be called every time when a param value needs to be obtained for a request (unless the param was overridden). The function will be passed the current data value as an argument.</li> <li>
<strong><code>url</code></strong> – {string} – action specific <code>url</code> override. The url templating is supported just like for the resource-level urls.</li> <li>
<strong><code>isArray</code></strong> – {boolean=} – If true then the returned object for this action is an array, see <code>returns</code> section.</li> <li>
<strong><code>transformRequest</code></strong> – <code>{function(data, headersGetter)|Array.&lt;function(data, headersGetter)&gt;}</code> – transform function or an array of such functions. The transform function takes the http request body and headers and returns its transformed (typically serialized) version. By default, transformRequest will contain one function that checks if the request data is an object and serializes it using <code>angular.toJson</code>. To prevent this behavior, set <code>transformRequest</code> to an empty array: <code>transformRequest: []</code>
</li> <li>
<strong><code>transformResponse</code></strong> – <code>{function(data, headersGetter, status)|Array.&lt;function(data, headersGetter, status)&gt;}</code> – transform function or an array of such functions. The transform function takes the http response body, headers and status and returns its transformed (typically deserialized) version. By default, transformResponse will contain one function that checks if the response looks like a JSON string and deserializes it using <code>angular.fromJson</code>. To prevent this behavior, set <code>transformResponse</code> to an empty array: <code>transformResponse: []</code>
</li> <li>
<strong><code>cache</code></strong> – <code>{boolean|Cache}</code> – If true, a default $http cache will be used to cache the GET request, otherwise if a cache instance built with <a href="../../../ng/service/%24cachefactory/">$cacheFactory</a> is supplied, this cache will be used for caching.</li> <li>
<strong><code>timeout</code></strong> – <code>{number}</code> – timeout in milliseconds.<br> <strong>Note:</strong> In contrast to <a href="../../../ng/service/%24http/#usage.html">$http.config</a>, <a href="../../../ng/service/%24q/">promises</a> are <strong>not</strong> supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the <code>cancellable</code> option.</li> <li>
<strong><code>cancellable</code></strong> – <code>{boolean}</code> – if set to true, the request made by a "non-instance" call will be cancelled (if not already completed) by calling <code>$cancelRequest()</code> on the call's return value. Calling <code>$cancelRequest()</code> for a non-cancellable or an already completed/cancelled request will have no effect.<br>
</li> <li>
<strong><code>withCredentials</code></strong> - <code>{boolean}</code> - whether to set the <code>withCredentials</code> flag on the XHR object. See <a href="https://developer.mozilla.org/en/http_access_control#section_5" target="_blank">requests with credentials</a> for more information.</li> <li>
<strong><code>responseType</code></strong> - <code>{string}</code> - see <a href="https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#responseType" target="_blank">requestType</a>.</li> <li>
<strong><code>interceptor</code></strong> - <code>{Object=}</code> - The interceptor object has two optional methods - <code>response</code> and <code>responseError</code>. Both <code>response</code> and <code>responseError</code> interceptors get called with <code>http response</code> object. See <a href="../../../ng/service/%24http/">$http interceptors</a>. In addition, the resource instance or array object is accessible by the <code>resource</code> property of the <code>http response</code> object. Keep in mind that the associated promise will be resolved with the value returned by the response interceptor, if one is specified. The default response interceptor returns <code>response.resource</code> (i.e. the resource instance or array).</li> <li>
<strong><code>hasBody</code></strong> - <code>{boolean}</code> - allows to specify if a request body should be included or not. If not specified only POST, PUT and PATCH requests will have a body.</li> </ul> </td> </tr> <tr> <td> options </td> <td> <code class="label type-hint type-hint-object">Object</code> </td> <td> <p>Hash with custom settings that should extend the default <code>$resourceProvider</code> behavior. The supported options are:</p> <ul> <li>
<strong><code>stripTrailingSlashes</code></strong> – {boolean} – If true then the trailing slashes from any calculated URL will be stripped. (Defaults to true.)</li> <li>
<strong><code>cancellable</code></strong> – {boolean} – If true, the request made by a "non-instance" call will be cancelled (if not already completed) by calling <code>$cancelRequest()</code> on the call's return value. This can be overwritten per action. (Defaults to false.)</li> </ul> </td> </tr> </tbody> </table> </section> <h3>Returns</h3> <table class="variables-matrix return-arguments"> <tr> <td><code class="label type-hint type-hint-object">Object</code></td> <td>
<p>A resource "class" object with methods for the default set of resource actions optionally extended with custom <code>actions</code>. The default set contains these actions:</p> <pre data-language="javascript">{ 'get':    {method:'GET'},
  'save':   {method:'POST'},
  'query':  {method:'GET', isArray:true},
  'remove': {method:'DELETE'},
  'delete': {method:'DELETE'} };
</pre> <p> Calling these methods invoke an <a href="../../../ng/service/%24http/"><code>$http</code></a> with the specified http method, destination and parameters. When the data is returned from the server then the object is an instance of the resource class. The actions <code>save</code>, <code>remove</code> and <code>delete</code> are available on it as methods with the <code>$</code> prefix. This allows you to easily perform CRUD operations (create, read, update, delete) on server-side data like this:</p> <pre data-language="javascript">var User = $resource('/user/:userId', {userId:'@id'});
var user = User.get({userId:123}, function() {
  user.abc = true;
  user.$save();
});
</pre> <p> It is important to realize that invoking a $resource object method immediately returns an empty reference (object or array depending on <code>isArray</code>). Once the data is returned from the server the existing reference is populated with the actual data. This is a useful trick since usually the resource is assigned to a model which is then rendered by the view. Having an empty object results in no rendering, once the data arrives from the server then the object is populated with the data and the view automatically re-renders itself showing the new data. This means that in most cases one never has to write a callback function for the action methods.</p> <p> The action methods on the class object or instance object can be invoked with the following parameters:</p> <ul> <li>"class" actions without a body: <code>Resource.action([parameters], [success], [error])</code>
</li> <li>"class" actions with a body: <code>Resource.action([parameters], postData, [success], [error])</code>
</li> <li>instance actions: <code>instance.$action([parameters], [success], [error])</code>
</li> </ul> <p> When calling instance methods, the instance itself is used as the request body (if the action should have a body). By default, only actions using <code>POST</code>, <code>PUT</code> or <code>PATCH</code> have request bodies, but you can use the <code>hasBody</code> configuration option to specify whether an action should have a body or not (regardless of its HTTP method).</p> <p> Success callback is called with (value (Object|Array), responseHeaders (Function), status (number), statusText (string)) arguments, where the value is the populated resource instance or collection object. The error callback is called with (httpResponse) argument.</p> <p> Class actions return empty instance (with additional properties below). Instance actions return promise of the action.</p> <p> The Resource instances and collections have these additional properties:</p> <ul> <li>
<p><code>$promise</code>: the <a href="../../../ng/service/%24q/">promise</a> of the original server interaction that created this instance or collection.</p> <p>On success, the promise is resolved with the same resource instance or collection object, updated with data from server. This makes it easy to use in <a href="../../../ngroute/provider/%24routeprovider/">resolve section of $routeProvider.when()</a> to defer view rendering until the resource(s) are loaded.</p> <p>On failure, the promise is rejected with the <a href="../../../ng/service/%24http/">http response</a> object.</p> <p>If an interceptor object was provided, the promise will instead be resolved with the value returned by the interceptor.</p> </li> <li>
<p><code>$resolved</code>: <code>true</code> after first server interaction is completed (either with success or rejection), <code>false</code> before that. Knowing if the Resource has been resolved is useful in data-binding.</p> <p>The Resource instances and collections have these additional methods:</p> </li> <li>
<p><code>$cancelRequest</code>: If there is a cancellable, pending request related to the instance or collection, calling this method will abort the request.</p> <p>The Resource instances have these additional methods:</p> </li> <li>
<p><code>toJSON</code>: It returns a simple object without any of the extra properties added as part of the Resource API. This object can be serialized through <a href="../../../ng/function/angular.tojson/"><code>angular.toJson</code></a> safely without attaching Angular-specific fields. Notice that <code>JSON.stringify</code> (and <code>angular.toJson</code>) automatically use this method when serializing a Resource instance (see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON%28%29_behavior" target="_blank">MDN</a>).</p> </li> </ul> </td> </tr> </table> <h2 id="credit-card-resource">Credit card resource</h2> <pre data-language="javascript">// Define CreditCard class
var CreditCard = $resource('/user/:userId/card/:cardId',
 {userId:123, cardId:'@id'}, {
  charge: {method:'POST', params:{charge:true}}
 });

// We can retrieve a collection from the server
var cards = CreditCard.query(function() {
  // GET: /user/123/card
  // server returns: [ {id:456, number:'1234', name:'Smith'} ];

  var card = cards[0];
  // each item is an instance of CreditCard
  expect(card instanceof CreditCard).toEqual(true);
  card.name = "J. Smith";
  // non GET methods are mapped onto the instances
  card.$save();
  // POST: /user/123/card/456 {id:456, number:'1234', name:'J. Smith'}
  // server returns: {id:456, number:'1234', name: 'J. Smith'};

  // our custom method is mapped as well.
  card.$charge({amount:9.99});
  // POST: /user/123/card/456?amount=9.99&amp;charge=true {id:456, number:'1234', name:'J. Smith'}
});

// we can create an instance as well
var newCard = new CreditCard({number:'0123'});
newCard.name = "Mike Smith";
newCard.$save();
// POST: /user/123/card {number:'0123', name:'Mike Smith'}
// server returns: {id:789, number:'0123', name: 'Mike Smith'};
expect(newCard.id).toEqual(789);
</pre> <p>The object returned from this function execution is a resource "class" which has "static" method for each action in the definition.</p> <p>Calling these methods invoke <code>$http</code> on the <code>url</code> template with the given <code>method</code>, <code>params</code> and <code>headers</code>.</p> <h2 id="user-resource">User resource</h2> <p>When the data is returned from the server then the object is an instance of the resource type and all of the non-GET methods are available with <code>$</code> prefix. This allows you to easily support CRUD operations (create, read, update, delete) on server-side data.</p> <pre data-language="javascript">var User = $resource('/user/:userId', {userId:'@id'});
User.get({userId:123}, function(user) {
  user.abc = true;
  user.$save();
});
</pre> <p>It's worth noting that the success callback for <code>get</code>, <code>query</code> and other methods gets passed in the response that came from the server as well as $http header getter function, so one could rewrite the above example and get access to http headers as:</p> <pre data-language="javascript">var User = $resource('/user/:userId', {userId:'@id'});
User.get({userId:123}, function(user, getResponseHeaders){
  user.abc = true;
  user.$save(function(user, putResponseHeaders) {
    //user =&gt; saved user object
    //putResponseHeaders =&gt; $http header getter
  });
});
</pre> <p>You can also access the raw <code>$http</code> promise via the <code>$promise</code> property on the object returned</p> <pre>var User = $resource('/user/:userId', {userId:'@id'});
User.get({userId:123})
    .$promise.then(function(user) {
      $scope.user = user;
    });
</pre> <h2 id="creating-a-custom-put-request">Creating a custom 'PUT' request</h2> <p>In this example we create a custom method on our resource to make a PUT request</p> <pre data-language="javascript">var app = angular.module('app', ['ngResource', 'ngRoute']);

// Some APIs expect a PUT request in the format URL/object/ID
// Here we are creating an 'update' method
app.factory('Notes', ['$resource', function($resource) {
return $resource('/notes/:id', null,
    {
        'update': { method:'PUT' }
    });
}]);

// In our controller we get the ID from the URL using ngRoute and $routeParams
// We pass in $routeParams and our Notes factory along with $scope
app.controller('NotesCtrl', ['$scope', '$routeParams', 'Notes',
                                   function($scope, $routeParams, Notes) {
// First get a note object from the factory
var note = Notes.get({ id:$routeParams.id });
$id = note.id;

// Now call update passing in the ID first then the object you are updating
Notes.update({ id:$id }, note);

// This will PUT /notes/ID with the note object in the request payload
}]);
</pre> <h2 id="cancelling-requests">Cancelling requests</h2> <p>If an action's configuration specifies that it is cancellable, you can cancel the request related to an instance or collection (as long as it is a result of a "non-instance" call):</p> <pre data-language="javascript">// ...defining the `Hotel` resource...
var Hotel = $resource('/api/hotel/:id', {id: '@id'}, {
  // Let's make the `query()` method cancellable
  query: {method: 'get', isArray: true, cancellable: true}
});

// ...somewhere in the PlanVacationController...
...
this.onDestinationChanged = function onDestinationChanged(destination) {
  // We don't care about any pending request for hotels
  // in a different destination any more
  this.availableHotels.$cancelRequest();

  // Let's query for hotels in '&lt;destination&gt;'
  // (calls: /api/hotel?location=&lt;destination&gt;)
  this.availableHotels = Hotel.query({location: destination});
};
</pre> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2017 Google, Inc.<br>Licensed under the Creative Commons Attribution License 4.0.<br>
    <a href="https://code.angularjs.org/1.6.6/docs/api/ngResource/service/%24resource" class="_attribution-link" target="_blank">https://code.angularjs.org/1.6.6/docs/api/ngResource/service/$resource</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
