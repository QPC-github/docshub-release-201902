
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Db&#92;Profiler - Phalcon 2 - W3cubDocs</title>
  
  <meta name="description" content="Instances of Phalcon&#92;Db can generate execution profiles on SQL statements sent to the relational database. Profiled information includes &hellip;">
  <meta name="keywords" content="class, db, profiler, -, phalcon, phalcon~2">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/phalcon~2/api/phalcon_db_profiler/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/phalcon~2.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/phalcon~2/" class="_nav-link" title="" style="margin-left:0;">Phalcon 2</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _phalcon">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 id="class-phalcon-db-profiler">Class <strong>Phalcon\Db\Profiler</strong>
</h1> <p>Instances of Phalcon\Db can generate execution profiles on SQL statements sent to the relational database. Profiled information includes execution time in miliseconds. This helps you to identify bottlenecks in your applications.</p> <pre class="highlight-php" data-language="php">$profiler = new Phalcon\Db\Profiler();

//Set the connection profiler
$connection-&gt;setProfiler($profiler);

$sql = "SELECT buyer_name, quantity, product_name
FROM buyers LEFT JOIN products ON
buyers.pid=products.id";

//Execute a SQL statement
$connection-&gt;query($sql);

//Get the last profile in the profiler
$profile = $profiler-&gt;getLastProfile();

echo "SQL Statement: ", $profile-&gt;getSQLStatement(), "\n";
echo "Start Time: ", $profile-&gt;getInitialTime(), "\n";
echo "Final Time: ", $profile-&gt;getFinalTime(), "\n";
echo "Total Elapsed Time: ", $profile-&gt;getTotalElapsedSeconds(), "\n";
</pre>  <h2 id="methods">Methods</h2> <h3 id="startprofile" class="method-signature">public <a class="reference internal" href="../phalcon_db_profiler/"><em>Phalcon\Db\Profiler</em></a> <strong>startProfile</strong> (<em>string</em> $sqlStatement, [<em>unknown</em> $sqlVariables], [<em>unknown</em> $sqlBindTypes])</h3> <p>Starts the profile of a SQL sentence</p> <h3 id="stopprofile" class="method-signature">public <a class="reference internal" href="../phalcon_db_profiler/"><em>Phalcon\Db\Profiler</em></a> <strong>stopProfile</strong> ()</h3> <p>Stops the active profile</p> <h3 id="getnumbertotalstatements" class="method-signature">public <em>integer</em> <strong>getNumberTotalStatements</strong> ()</h3> <p>Returns the total number of SQL statements processed</p> <h3 id="gettotalelapsedseconds" class="method-signature">public <em>double</em> <strong>getTotalElapsedSeconds</strong> ()</h3> <p>Returns the total time in seconds spent by the profiles</p> <h3 id="getprofiles" class="method-signature">public <a class="reference internal" href="../phalcon_db_profiler_item/"><em>Phalcon\Db\Profiler\Item</em></a> [] <strong>getProfiles</strong> ()</h3> <p>Returns all the processed profiles</p> <h3 id="reset" class="method-signature">public <a class="reference internal" href="../phalcon_db_profiler/"><em>Phalcon\Db\Profiler</em></a> <strong>reset</strong> ()</h3> <p>Resets the profiler, cleaning up all the profiles</p> <h3 id="getlastprofile" class="method-signature">public <a class="reference internal" href="../phalcon_db_profiler_item/"><em>Phalcon\Db\Profiler\Item</em></a> <strong>getLastProfile</strong> ()</h3> <p>Returns the last profile executed in the profiler</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2011–2016 Phalcon Framework Team<br>Licensed under the Creative Commons Attribution License 3.0.<br>
    <a href="https://docs.phalconphp.com/en/2.0.0/api/Phalcon_Db_Profiler.html" class="_attribution-link" target="_blank">https://docs.phalconphp.com/en/2.0.0/api/Phalcon_Db_Profiler.html</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
