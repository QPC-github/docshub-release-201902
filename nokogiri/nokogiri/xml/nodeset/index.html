
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Nokogiri&#58;&#58;XML&#58;&#58;NodeSet - Nokogiri - W3cubDocs</title>
  
  <meta name="description" content="A NodeSet contains a list of Nokogiri&#58;&#58;XML&#58;&#58;Node objects. Typically a NodeSet is return as a result of searching a Document via &hellip;">
  <meta name="keywords" content="class, nokogiri, xml, nodeset, -">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/nokogiri/nokogiri/xml/nodeset/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/nokogiri.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/nokogiri/" class="_nav-link" title="" style="margin-left:0;">Nokogiri</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _rdoc">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 id="class-Nokogiri::XML::NodeSet" class="class"> class Nokogiri::XML::NodeSet </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><span>Object</span></dd>
<dt>Included modules:</dt>
<dd class="meta-includes"><a class="include" href="../searchable/">Nokogiri::XML::Searchable</a></dd>
</dl> <section class="description"> <p>A <a href="../nodeset/">NodeSet</a> contains a list of <a href="../node/">Nokogiri::XML::Node</a> objects. Typically a <a href="../nodeset/">NodeSet</a> is return as a result of searching a <a href="../document/">Document</a> via <a href="../searchable/#method-i-css">Nokogiri::XML::Searchable#css</a> or <a href="../searchable/#method-i-xpath">Nokogiri::XML::Searchable#xpath</a></p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-document"> <span class="method-name">document</span><span class="attribute-access-type">[RW]</span> </div> <div class="method-description"> <p>The <a href="../document/">Document</a> this <a href="../nodeset/">NodeSet</a> is associated with</p> </div> </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(document, list = []) { |self| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 17
def initialize document, list = []
  @document = document
  document.decorate(self)
  list.each { |x| self &lt;&lt; x }
  yield self if block_given?
end</pre> </div> <p>Create a <a href="../nodeset/">NodeSet</a> with <code>document</code> defaulting to <code>list</code></p>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-25"> <span class="method-name">%</span><span class="method-args">(*args)</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-at">at</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-26"> <span class="method-callseq"> &amp;(node_set) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="26-source"> <pre class="c" data-language="c">static VALUE intersection(VALUE self, VALUE rb_other)
{
  xmlNodeSetPtr node_set, other ;
  xmlNodeSetPtr intersection;

  if(!rb_obj_is_kind_of(rb_other, cNokogiriXmlNodeSet))
    rb_raise(rb_eArgError, "node_set must be a Nokogiri::XML::NodeSet");

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Data_Get_Struct(rb_other, xmlNodeSet, other);

  intersection = xmlXPathIntersection(node_set, other);
  return Nokogiri_wrap_xml_node_set(intersection, rb_iv_get(self, "@document"));
}</pre> </div> <p>Set Intersection — Returns a new <a href="../nodeset/">NodeSet</a> containing nodes common to the two NodeSets.</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-2B"> <span class="method-name">+</span><span class="method-args">(p1)</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-7C">|</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-2D"> <span class="method-callseq"> -(node_set) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="2D-source"> <pre class="c" data-language="c">static VALUE minus(VALUE self, VALUE rb_other)
{
  xmlNodeSetPtr node_set, other;
  xmlNodeSetPtr new;
  int j ;

  if(!rb_obj_is_kind_of(rb_other, cNokogiriXmlNodeSet))
    rb_raise(rb_eArgError, "node_set must be a Nokogiri::XML::NodeSet");

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Data_Get_Struct(rb_other, xmlNodeSet, other);

  new = xmlXPathNodeSetMerge(NULL, node_set);
  for (j = 0 ; j &lt; other-&gt;nodeNr ; ++j) {
    xpath_node_set_del(new, other-&gt;nodeTab[j]);
  }

  return Nokogiri_wrap_xml_node_set(new, rb_iv_get(self, "@document"));
}</pre> </div> <p>Difference - returns a new <a href="../nodeset/">NodeSet</a> that is a copy of this <a href="../nodeset/">NodeSet</a>, removing each item that also appears in <code>node_set</code></p>  </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-3C-3C"> <span class="method-name">&lt;&lt;</span><span class="method-args">(p1)</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-push">push</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-3D-3D"> <span class="method-name">==</span><span class="method-args">(other)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="3D-3D-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 293
def == other
  return false unless other.is_a?(Nokogiri::XML::NodeSet)
  return false unless length == other.length
  each_with_index do |node, i|
    return false unless node == other[i]
  end
  true
end</pre> </div> <p>Equality – Two NodeSets are equal if the contain the same number of elements and if each element is equal to the corresponding element in the other <a href="../nodeset/">NodeSet</a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-3E"> <span class="method-name">&gt;</span><span class="method-args">(selector)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="3E-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 105
def &gt; selector
  ns = document.root.namespaces
  xpath CSS.xpath_for(selector, :prefix =&gt; "./", :ns =&gt; ns).first
end</pre> </div> <p>Search this NodeSet's nodes' immediate children using <a href="../../css/">CSS</a> selector <code>selector</code></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-5B-5D"> <span class="method-callseq"> [index] → Node or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> [start, length] → NodeSet or nil </span> </div> <div class="method-heading"> <span class="method-callseq"> [range] → NodeSet or nil </span> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-source"> <pre class="c" data-language="c">static VALUE slice(int argc, VALUE *argv, VALUE self)
{
  VALUE arg ;
  long beg, len ;
  xmlNodeSetPtr node_set;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  if (argc == 2) {
    beg = NUM2LONG(argv[0]);
    len = NUM2LONG(argv[1]);
    if (beg &lt; 0) {
      beg += node_set-&gt;nodeNr ;
    }
    return subseq(self, beg, len);
  }

  if (argc != 1) {
    rb_scan_args(argc, argv, "11", NULL, NULL);
  }
  arg = argv[0];

  if (FIXNUM_P(arg)) {
    return index_at(self, FIX2LONG(arg));
  }

  /* if arg is Range */
  switch (rb_range_beg_len(arg, &amp;beg, &amp;len, (long)node_set-&gt;nodeNr, 0)) {
  case Qfalse:
    break;
  case Qnil:
    return Qnil;
  default:
    return subseq(self, beg, len);
  }

  return index_at(self, NUM2LONG(arg));
}</pre> </div> <p><a href="../element/">Element</a> reference - returns the node at <code>index</code>, or returns a <a href="../nodeset/">NodeSet</a> containing nodes starting at <code>start</code> and continuing for <code>length</code> elements, or returns a <a href="../nodeset/">NodeSet</a> containing nodes specified by <code>range</code>. Negative <code>indices</code> count backward from the end of the <code>node_set</code> (-1 is the last node). Returns nil if the <code>index</code> (or <code>start</code>) are out of range.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-add_class"> <span class="method-name">add_class</span><span class="method-args">(name)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="add_class-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 142
def add_class name
  each do |el|
    el.add_class(name)
  end
  self
end</pre> </div> <p>Add the class attribute <code>name</code> to all <a href="../node/">Node</a> objects in the <a href="../nodeset/">NodeSet</a>.</p> <p>See <a href="../node/#method-i-add_class">Nokogiri::XML::Node#add_class</a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-after"> <span class="method-name">after</span><span class="method-args">(datum)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="after-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 65
def after datum
  last.after datum
end</pre> </div> <p>Insert <code>datum</code> after the last <a href="../node/">Node</a> in this <a href="../nodeset/">NodeSet</a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-append_class"> <span class="method-name">append_class</span><span class="method-args">(name)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="append_class-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 154
def append_class name
  each do |el|
    el.append_class(name)
  end
  self
end</pre> </div> <p>Append the class attribute <code>name</code> to all <a href="../node/">Node</a> objects in the <a href="../nodeset/">NodeSet</a>.</p> <p>See <a href="../node/#method-i-append_class">Nokogiri::XML::Node#append_class</a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-at"> <span class="method-callseq"> search *paths, [namespace-bindings, xpath-variable-bindings, custom-handler-class] </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="at-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 122
def at *args
  if args.length == 1 &amp;&amp; args.first.is_a?(Numeric)
    return self[args.first]
  end

  super(*args)
end</pre> </div> <p>Search this object for <code>paths</code>, and return only the first result. <code>paths</code> must be one or more <a href="../xpath/">XPath</a> or <a href="../../css/">CSS</a> queries.</p> <p>See <a href="../searchable/#method-i-search">Nokogiri::XML::Searchable#search</a> for more information.</p> <p>Or, if passed an integer, index into the NodeSet:</p> <pre class="ruby" data-language="ruby">node_set.at(3) # same as node_set[3]
</pre> <div class="method-calls-super"> Calls superclass method <a href="../searchable/#method-i-at">Nokogiri::XML::Searchable#at</a> </div>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-25">%</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-attr"> <span class="method-name">attr</span><span class="method-args">(key, value = nil, &amp;blk)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="attr-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 176
def attr key, value = nil, &amp;blk
  unless Hash === key || key &amp;&amp; (value || blk)
    return first.attribute(key)
  end

  hash = key.is_a?(Hash) ? key : { key =&gt; value }

  hash.each { |k,v| each { |el| el[k] = v || blk[el] } }

  self
end</pre> </div> <p>Set the attribute <code>key</code> to <code>value</code> or the return value of <code>blk</code> on all <a href="../node/">Node</a> objects in the <a href="../nodeset/">NodeSet</a>.</p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-set">set</a>, <a href="../nodeset/#method-i-attribute">attribute</a> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-attribute"> <span class="method-name">attribute</span><span class="method-args">(key, value = nil, &amp;blk)</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-attr">attr</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-before"> <span class="method-name">before</span><span class="method-args">(datum)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="before-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 59
def before datum
  first.before datum
end</pre> </div> <p>Insert <code>datum</code> before the first <a href="../node/">Node</a> in this <a href="../nodeset/">NodeSet</a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-children"> <span class="method-name">children</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="children-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 305
def children
  node_set = NodeSet.new(document)
  each do |node|
    node.children.each { |n| node_set.push(n) }
  end
  node_set
end</pre> </div> <p>Returns a new <a href="../nodeset/">NodeSet</a> containing all the children of all the nodes in the <a href="../nodeset/">NodeSet</a></p>  </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-clone"> <span class="method-name">clone</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-dup">dup</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-css"> <span class="method-callseq"> css *rules, [namespace-bindings, custom-pseudo-class] </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="css-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 79
def css *args
  rules, handler, ns, _ = extract_params(args)
  paths = css_rules_to_xpath(rules, ns)

  inject(NodeSet.new(document)) do |set, node|
    set + xpath_internal(node, paths, handler, ns, nil)
  end
end</pre> </div> <p>Search this node set for <a href="../../css/">CSS</a> <code>rules</code>. <code>rules</code> must be one or more <a href="../../css/">CSS</a> selectors. For example:</p> <p>For more information see <a href="../searchable/#method-i-css">Nokogiri::XML::Searchable#css</a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-delete"> <span class="method-callseq"> delete(node) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="delete-source"> <pre class="c" data-language="c">static VALUE
delete(VALUE self, VALUE rb_node)
{
  xmlNodeSetPtr node_set;
  xmlNodePtr node;

  Check_Node_Set_Node_Type(rb_node);

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Data_Get_Struct(rb_node, xmlNode, node);

  if (xmlXPathNodeSetContains(node_set, node)) {
    xpath_node_set_del(node_set, node);
    return rb_node;
  }
  return Qnil ;
}</pre> </div> <p>Delete <code>node</code> from the Nodeset, if it is a member. Returns the deleted node if found, otherwise returns nil.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-dup"> <span class="method-callseq"> dup </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="dup-source"> <pre class="c" data-language="c">static VALUE duplicate(VALUE self)
{
  xmlNodeSetPtr node_set;
  xmlNodeSetPtr dupl;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  dupl = xmlXPathNodeSetMerge(NULL, node_set);

  return Nokogiri_wrap_xml_node_set(dupl, rb_iv_get(self, "@document"));
}</pre> </div> <p>Duplicate this <a href="../nodeset/">NodeSet</a>. Note that the Nodes contained in the <a href="../nodeset/">NodeSet</a> are not duplicated (similar to how Array and other Enumerable classes work).</p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-clone">clone</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-each"> <span class="method-name">each</span><span class="method-args">() { |self| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="each-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 200
def each(&amp;block)
  return to_enum unless block_given?

  0.upto(length - 1) do |x|
    yield self[x]
  end
  self
end</pre> </div> <p>Iterate over each node, yielding to <code>block</code></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-empty-3F"> <span class="method-name">empty?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="empty-3F-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 41
def empty?
  length == 0
end</pre> </div> <p>Is this <a href="../nodeset/">NodeSet</a> empty?</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-filter"> <span class="method-name">filter</span><span class="method-args">(expr)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="filter-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 133
def filter expr
  find_all { |node| node.matches?(expr) }
end</pre> </div> <p>Filter this list for nodes that match <code>expr</code></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-first"> <span class="method-name">first</span><span class="method-args">(n = nil)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="first-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 26
def first n = nil
  return self[0] unless n
  list = []
  [n, length].min.times { |i| list &lt;&lt; self[i] }
  list
end</pre> </div> <p>Get the first element of the <a href="../nodeset/">NodeSet</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-include-3F"> <span class="method-callseq"> include?(node) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="include-3F-source"> <pre class="c" data-language="c">static VALUE include_eh(VALUE self, VALUE rb_node)
{
  xmlNodeSetPtr node_set;
  xmlNodePtr node;

  Check_Node_Set_Node_Type(rb_node);

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Data_Get_Struct(rb_node, xmlNode, node);

  return (xmlXPathNodeSetContains(node_set, node) ? Qtrue : Qfalse);
}</pre> </div> <p>Returns true if any member of node set equals <code>node</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-index"> <span class="method-name">index</span><span class="method-args">(node = nil) { |member| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="index-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 47
def index(node = nil, &amp;block)
  if node
    warn "given block not used" if block_given?
    each_with_index { |member, j| return j if member == node }
  elsif block_given?
    each_with_index { |member, j| return j if yield(member) }
  end
  nil
end</pre> </div> <p>Returns the index of the first node in self that is == to <code>node</code> or meets the given block. Returns nil if no match is found.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-inner_html"> <span class="method-name">inner_html</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="inner_html-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 229
def inner_html *args
  collect{|j| j.inner_html(*args) }.join('')
end</pre> </div> <p>Get the inner html of all contained <a href="../node/">Node</a> objects</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-inner_text"> <span class="method-name">inner_text</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="inner_text-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 222
def inner_text
  collect(&amp;:inner_text).join('')
end</pre> </div> <p>Get the inner text of all contained <a href="../node/">Node</a> objects</p> <p>Note: This joins the text of all <a href="../node/">Node</a> objects in the NodeSet:</p> <pre class="ruby" data-language="ruby">doc = Nokogiri::XML('&lt;xml&gt;&lt;a&gt;&lt;d&gt;foo&lt;/d&gt;&lt;d&gt;bar&lt;/d&gt;&lt;/a&gt;&lt;/xml&gt;')
doc.css('d').text # =&gt; "foobar"
</pre> <p>Instead, if you want to return the text of all nodes in the NodeSet:</p> <pre class="ruby" data-language="ruby">doc.css('d').map(&amp;:text) # =&gt; ["foo", "bar"]
</pre> <p>See <a href="../node/#method-i-content">Nokogiri::XML::Node#content</a> for more information.</p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-text">text</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-inspect"> <span class="method-name">inspect</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 326
def inspect
  "[#{map(&amp;:inspect).join ', '}]"
end</pre> </div> <p>Return a nicely formated string representation</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-last"> <span class="method-name">last</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="last-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 35
def last
  self[-1]
end</pre> </div> <p>Get the last element of the <a href="../nodeset/">NodeSet</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-length"> <span class="method-callseq"> length </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="length-source"> <pre class="c" data-language="c">static VALUE length(VALUE self)
{
  xmlNodeSetPtr node_set;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  return node_set ? INT2NUM(node_set-&gt;nodeNr) : INT2NUM(0);
}</pre> </div> <p>Get the length of the node set</p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-size">size</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-pop"> <span class="method-name">pop</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="pop-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 276
def pop
  return nil if length == 0
  delete last
end</pre> </div> <p>Removes the last element from set and returns it, or <code>nil</code> if the set is empty</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-push"> <span class="method-callseq"> push(node) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="push-source"> <pre class="c" data-language="c">static VALUE push(VALUE self, VALUE rb_node)
{
  xmlNodeSetPtr node_set;
  xmlNodePtr node;

  Check_Node_Set_Node_Type(rb_node);

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Data_Get_Struct(rb_node, xmlNode, node);

  xmlXPathNodeSetAdd(node_set, node);

  return self;
}</pre> </div> <p>Append <code>node</code> to the <a href="../nodeset/">NodeSet</a>.</p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-3C-3C">&lt;&lt;</a> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-remove"> <span class="method-name">remove</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-unlink">unlink</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-remove_attr"> <span class="method-name">remove_attr</span><span class="method-args">(name)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="remove_attr-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 192
def remove_attr name
  each { |el| el.delete name }
  self
end</pre> </div> <p>Remove the attributed named <code>name</code> from all <a href="../node/">Node</a> objects in the <a href="../nodeset/">NodeSet</a></p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-remove_attribute">remove_attribute</a> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-remove_attribute"> <span class="method-name">remove_attribute</span><span class="method-args">(name)</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-remove_attr">remove_attr</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-remove_class"> <span class="method-name">remove_class</span><span class="method-args">(name = nil)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="remove_class-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 166
def remove_class name = nil
  each do |el|
    el.remove_class(name)
  end
  self
end</pre> </div> <p>Remove the class attribute <code>name</code> from all <a href="../node/">Node</a> objects in the <a href="../nodeset/">NodeSet</a>.</p> <p>See <a href="../node/#method-i-remove_class">Nokogiri::XML::Node#remove_class</a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-reverse"> <span class="method-name">reverse</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="reverse-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 316
def reverse
  node_set = NodeSet.new(document)
  (length - 1).downto(0) do |x|
    node_set.push self[x]
  end
  node_set
end</pre> </div> <p>Returns a new <a href="../nodeset/">NodeSet</a> containing all the nodes in the <a href="../nodeset/">NodeSet</a> in reverse order</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-set"> <span class="method-name">set</span><span class="method-args">(key, value = nil, &amp;blk)</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-attr">attr</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-shift"> <span class="method-name">shift</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="shift-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 284
def shift
  return nil if length == 0
  delete first
end</pre> </div> <p>Returns the first element of the <a href="../nodeset/">NodeSet</a> and removes it. Returns <code>nil</code> if the set is empty.</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-size"> <span class="method-name">size</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-length">length</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-slice"> <span class="method-callseq"> slice(index) → Node or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> slice(start, length) → NodeSet or nil </span> </div> <div class="method-heading"> <span class="method-callseq"> slice(range) → NodeSet or nil </span> </div> <div class="method-description">
<div class="method-source-code" id="slice-source"> <pre class="c" data-language="c">static VALUE slice(int argc, VALUE *argv, VALUE self)
{
  VALUE arg ;
  long beg, len ;
  xmlNodeSetPtr node_set;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  if (argc == 2) {
    beg = NUM2LONG(argv[0]);
    len = NUM2LONG(argv[1]);
    if (beg &lt; 0) {
      beg += node_set-&gt;nodeNr ;
    }
    return subseq(self, beg, len);
  }

  if (argc != 1) {
    rb_scan_args(argc, argv, "11", NULL, NULL);
  }
  arg = argv[0];

  if (FIXNUM_P(arg)) {
    return index_at(self, FIX2LONG(arg));
  }

  /* if arg is Range */
  switch (rb_range_beg_len(arg, &amp;beg, &amp;len, (long)node_set-&gt;nodeNr, 0)) {
  case Qfalse:
    break;
  case Qnil:
    return Qnil;
  default:
    return subseq(self, beg, len);
  }

  return index_at(self, NUM2LONG(arg));
}</pre> </div> <p><a href="../element/">Element</a> reference - returns the node at <code>index</code>, or returns a <a href="../nodeset/">NodeSet</a> containing nodes starting at <code>start</code> and continuing for <code>length</code> elements, or returns a <a href="../nodeset/">NodeSet</a> containing nodes specified by <code>range</code>. Negative <code>indices</code> count backward from the end of the <code>node_set</code> (-1 is the last node). Returns nil if the <code>index</code> (or <code>start</code>) are out of range.</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-text"> <span class="method-name">text</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-inner_text">inner_text</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_a"> <span class="method-callseq"> to_a </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="to_a-source"> <pre class="c" data-language="c">static VALUE to_array(VALUE self, VALUE rb_node)
{
  xmlNodeSetPtr node_set ;
  VALUE list;
  int i;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  list = rb_ary_new2(node_set-&gt;nodeNr);
  for(i = 0; i &lt; node_set-&gt;nodeNr; i++) {
    VALUE elt = Nokogiri_wrap_xml_node_set_node(node_set-&gt;nodeTab[i], self);
    rb_ary_push( list, elt );
  }

  return list;
}</pre> </div> <p>Return this list as an Array</p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-to_ary">to_ary</a> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-to_ary"> <span class="method-name">to_ary</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="../nodeset/#method-i-to_a">to_a</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_html"> <span class="method-name">to_html</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="to_html-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 247
def to_html *args
  if Nokogiri.jruby?
    options = args.first.is_a?(Hash) ? args.shift : {}
    if !options[:save_with]
      options[:save_with] = Node::SaveOptions::NO_DECLARATION | Node::SaveOptions::NO_EMPTY_TAGS | Node::SaveOptions::AS_HTML
    end
    args.insert(0, options)
  end
  map { |x| x.to_html(*args) }.join
end</pre> </div> <p>Convert this <a href="../nodeset/">NodeSet</a> to <a href="../../html/">HTML</a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_s"> <span class="method-name">to_s</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="to_s-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 241
def to_s
  map(&amp;:to_s).join
end</pre> </div> <p>Convert this <a href="../nodeset/">NodeSet</a> to a string.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_xhtml"> <span class="method-name">to_xhtml</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="to_xhtml-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 260
def to_xhtml *args
  map { |x| x.to_xhtml(*args) }.join
end</pre> </div> <p>Convert this <a href="../nodeset/">NodeSet</a> to XHTML</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_xml"> <span class="method-name">to_xml</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="to_xml-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 266
def to_xml *args
  map { |x| x.to_xml(*args) }.join
end</pre> </div> <p>Convert this <a href="../nodeset/">NodeSet</a> to <a href="../../xml/">XML</a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-unlink"> <span class="method-callseq"> unlink </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="unlink-source"> <pre class="c" data-language="c">static VALUE unlink_nodeset(VALUE self)
{
  xmlNodeSetPtr node_set;
  int j, nodeNr ;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  nodeNr = node_set-&gt;nodeNr ;
  for (j = 0 ; j &lt; nodeNr ; j++) {
    if (! NOKOGIRI_NAMESPACE_EH(node_set-&gt;nodeTab[j])) {
      VALUE node ;
      xmlNodePtr node_ptr;
      node = Nokogiri_wrap_xml_node(Qnil, node_set-&gt;nodeTab[j]);
      rb_funcall(node, rb_intern("unlink"), 0); /* modifies the C struct out from under the object */
      Data_Get_Struct(node, xmlNode, node_ptr);
      node_set-&gt;nodeTab[j] = node_ptr ;
    }
  }
  return self ;
}</pre> </div> <p>Unlink this <a href="../nodeset/">NodeSet</a> and all <a href="../node/">Node</a> objects it contains from their current context.</p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-remove">remove</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-wrap"> <span class="method-name">wrap</span><span class="method-args">(html)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="wrap-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 235
def wrap html
  map { |node| node.wrap html }
end</pre> </div> <p>Wrap this <a href="../nodeset/">NodeSet</a> with <code>html</code></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-xpath"> <span class="method-callseq"> xpath *paths, [namespace-bindings, variable-bindings, custom-handler-class] </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="xpath-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 95
def xpath *args
  paths, handler, ns, binds = extract_params(args)

  inject(NodeSet.new(document)) do |set, node|
    set + xpath_internal(node, paths, handler, ns, binds)
  end
end</pre> </div> <p>Search this node set for <a href="../xpath/">XPath</a> <code>paths</code>. <code>paths</code> must be one or more <a href="../xpath/">XPath</a> queries.</p> <p>For more information see <a href="../searchable/#method-i-xpath">Nokogiri::XML::Searchable#xpath</a></p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-7C"> <span class="method-callseq"> |(node_set) </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="7C-source"> <pre class="c" data-language="c">static VALUE set_union(VALUE self, VALUE rb_other)
{
  xmlNodeSetPtr node_set, other;
  xmlNodeSetPtr new;

  if(!rb_obj_is_kind_of(rb_other, cNokogiriXmlNodeSet))
    rb_raise(rb_eArgError, "node_set must be a Nokogiri::XML::NodeSet");

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Data_Get_Struct(rb_other, xmlNodeSet, other);

  new = xmlXPathNodeSetMerge(NULL, node_set);
  new = xmlXPathNodeSetMerge(new, other);

  return Nokogiri_wrap_xml_node_set(new, rb_iv_get(self, "@document"));
}</pre> </div> <p>Returns a new set built by merging the set and the elements of the given set.</p>  </div> <div class="aliases"> Also aliased as: <a href="../nodeset/#method-i-2B">+</a> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2008–2018 Aaron Patterson, Mike Dalessio, Charles Nutter, Sergio Arbeo,<br>Patrick Mahoney, Yoko Harada, Akinori Musha, John Shahid, Lars Kanis<br>Licensed under the MIT License.<br>
    
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
