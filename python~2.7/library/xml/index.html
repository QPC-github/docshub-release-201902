
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>XML Processing Modules - Python 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" Python’s interfaces for processing XML are grouped in the xml package. ">
  <meta name="keywords" content="xml, processing, modules, vulnerabilities, -, python, python~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/python~2.7/library/xml/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/python~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/python~2.7/" class="_nav-link" title="" style="margin-left:0;">Python 2.7</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 id="xml"> XML Processing Modules</h1> <p id="module-xml">Python’s interfaces for processing XML are grouped in the <code>xml</code> package.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">The XML modules are not secure against erroneous or maliciously constructed data. If you need to parse untrusted or unauthenticated data see <a class="reference internal" href="#xml-vulnerabilities"><span>XML vulnerabilities</span></a>.</p> </div> <p>It is important to note that modules in the <a class="reference internal" href="#module-xml" title="xml: Package containing XML processing modules"><code>xml</code></a> package require that there be at least one SAX-compliant XML parser available. The Expat parser is included with Python, so the <a class="reference internal" href="../pyexpat/#module-xml.parsers.expat" title="xml.parsers.expat: An interface to the Expat non-validating XML parser."><code>xml.parsers.expat</code></a> module will always be available.</p> <p>The documentation for the <a class="reference internal" href="../xml.dom/#module-xml.dom" title="xml.dom: Document Object Model API for Python."><code>xml.dom</code></a> and <a class="reference internal" href="../xml.sax/#module-xml.sax" title="xml.sax: Package containing SAX2 base classes and convenience functions."><code>xml.sax</code></a> packages are the definition of the Python bindings for the DOM and SAX interfaces.</p> <p>The XML handling submodules are:</p> <ul class="simple"> <li>
<a class="reference internal" href="../xml.etree.elementtree/#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code>xml.etree.ElementTree</code></a>: the ElementTree API, a simple and lightweight XML processor</li> </ul> <ul class="simple"> <li>
<a class="reference internal" href="../xml.dom/#module-xml.dom" title="xml.dom: Document Object Model API for Python."><code>xml.dom</code></a>: the DOM API definition</li> <li>
<a class="reference internal" href="../xml.dom.minidom/#module-xml.dom.minidom" title="xml.dom.minidom: Minimal Document Object Model (DOM) implementation."><code>xml.dom.minidom</code></a>: a minimal DOM implementation</li> <li>
<a class="reference internal" href="../xml.dom.pulldom/#module-xml.dom.pulldom" title="xml.dom.pulldom: Support for building partial DOM trees from SAX events."><code>xml.dom.pulldom</code></a>: support for building partial DOM trees</li> </ul> <ul class="simple"> <li>
<a class="reference internal" href="../xml.sax/#module-xml.sax" title="xml.sax: Package containing SAX2 base classes and convenience functions."><code>xml.sax</code></a>: SAX2 base classes and convenience functions</li> <li>
<a class="reference internal" href="../pyexpat/#module-xml.parsers.expat" title="xml.parsers.expat: An interface to the Expat non-validating XML parser."><code>xml.parsers.expat</code></a>: the Expat parser binding</li> </ul>   <h1 id="id1"> XML vulnerabilities</h1> <p id="xml-vulnerabilities">The XML processing modules are not secure against maliciously constructed data. An attacker can abuse vulnerabilities for e.g. denial of service attacks, to access local files, to generate network connections to other machines, or to or circumvent firewalls. The attacks on XML abuse unfamiliar features like inline <a class="reference external" href="https://en.wikipedia.org/wiki/Document_type_definition" target="_blank">DTD</a> (document type definition) with entities.</p> <p>The following table gives an overview of the known attacks and if the various modules are vulnerable to them.</p> <table class="docutils">  <thead valign="bottom"> <tr class="row-odd">
<th class="head">kind</th> <th class="head">sax</th> <th class="head">etree</th> <th class="head">minidom</th> <th class="head">pulldom</th> <th class="head">xmlrpc</th> </tr> </thead>  <tr class="row-even">
<td>billion laughs</td> <td><strong>Vulnerable</strong></td> <td><strong>Vulnerable</strong></td> <td><strong>Vulnerable</strong></td> <td><strong>Vulnerable</strong></td> <td><strong>Vulnerable</strong></td> </tr> <tr class="row-odd">
<td>quadratic blowup</td> <td><strong>Vulnerable</strong></td> <td><strong>Vulnerable</strong></td> <td><strong>Vulnerable</strong></td> <td><strong>Vulnerable</strong></td> <td><strong>Vulnerable</strong></td> </tr> <tr class="row-even">
<td>external entity expansion</td> <td><strong>Vulnerable</strong></td> <td>Safe (1)</td> <td>Safe (2)</td> <td><strong>Vulnerable</strong></td> <td>Safe (3)</td> </tr> <tr class="row-odd">
<td>
<a class="reference external" href="https://en.wikipedia.org/wiki/Document_type_definition" target="_blank">DTD</a> retrieval</td> <td><strong>Vulnerable</strong></td> <td>Safe</td> <td>Safe</td> <td><strong>Vulnerable</strong></td> <td>Safe</td> </tr> <tr class="row-even">
<td>decompression bomb</td> <td>Safe</td> <td>Safe</td> <td>Safe</td> <td>Safe</td> <td><strong>Vulnerable</strong></td> </tr>  </table> <ol class="arabic simple"> <li>
<a class="reference internal" href="../xml.etree.elementtree/#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code>xml.etree.ElementTree</code></a> doesn’t expand external entities and raises a ParserError when an entity occurs.</li> <li>
<a class="reference internal" href="../xml.dom.minidom/#module-xml.dom.minidom" title="xml.dom.minidom: Minimal Document Object Model (DOM) implementation."><code>xml.dom.minidom</code></a> doesn’t expand external entities and simply returns the unexpanded entity verbatim.</li> <li>
<a class="reference internal" href="../xmlrpclib/#module-xmlrpclib" title="xmlrpclib: XML-RPC client access."><code>xmlrpclib</code></a> doesn’t expand external entities and omits them.</li> </ol> <dl class="docutils"> <dt>billion laughs / exponential entity expansion</dt> <dd>The <a class="reference external" href="https://en.wikipedia.org/wiki/Billion_laughs" target="_blank">Billion Laughs</a> attack – also known as exponential entity expansion – uses multiple levels of nested entities. Each entity refers to another entity several times, the final entity definition contains a small string. Eventually the small string is expanded to several gigabytes. The exponential expansion consumes lots of CPU time, too.</dd> <dt>quadratic blowup entity expansion</dt> <dd>A quadratic blowup attack is similar to a <a class="reference external" href="https://en.wikipedia.org/wiki/Billion_laughs" target="_blank">Billion Laughs</a> attack; it abuses entity expansion, too. Instead of nested entities it repeats one large entity with a couple of thousand chars over and over again. The attack isn’t as efficient as the exponential case but it avoids triggering countermeasures of parsers against heavily nested entities.</dd> <dt>external entity expansion</dt> <dd>Entity declarations can contain more than just text for replacement. They can also point to external resources by public identifiers or system identifiers. System identifiers are standard URIs or can refer to local files. The XML parser retrieves the resource with e.g. HTTP or FTP requests and embeds the content into the XML document.</dd> <dt>
<a class="reference external" href="https://en.wikipedia.org/wiki/Document_type_definition" target="_blank">DTD</a> retrieval</dt> <dd>Some XML libraries like Python’s <a class="reference internal" href="../xml.dom.pulldom/#module-xml.dom.pulldom" title="xml.dom.pulldom: Support for building partial DOM trees from SAX events."><code>xml.dom.pulldom</code></a> retrieve document type definitions from remote or local locations. The feature has similar implications as the external entity expansion issue.</dd> <dt>decompression bomb</dt> <dd>The issue of decompression bombs (aka <a class="reference external" href="https://en.wikipedia.org/wiki/Zip_bomb" target="_blank">ZIP bomb</a>) apply to all XML libraries that can parse compressed XML stream like gzipped HTTP streams or LZMA-ed files. For an attacker it can reduce the amount of transmitted data by three magnitudes or more.</dd> </dl> <p>The documentation of <a class="reference external" href="https://pypi.python.org/pypi/defusedxml/" target="_blank">defusedxml</a> on PyPI has further information about all known attack vectors with examples and references.</p>  <h2 id="defused-packages">1. defused packages</h2> <p>These external packages are recommended for any code that parses untrusted XML data.</p> <p><a class="reference external" href="https://pypi.python.org/pypi/defusedxml/" target="_blank">defusedxml</a> is a pure Python package with modified subclasses of all stdlib XML parsers that prevent any potentially malicious operation. The package also ships with example exploits and extended documentation on more XML exploits like xpath injection.</p> <p><a class="reference external" href="https://pypi.python.org/pypi/defusedexpat/" target="_blank">defusedexpat</a> provides a modified libexpat and patched replacement <code>pyexpat</code> extension module with countermeasures against entity expansion DoS attacks. Defusedexpat still allows a sane and configurable amount of entity expansions. The modifications will be merged into future releases of Python.</p> <p>The workarounds and modifications are not included in patch releases as they break backward compatibility. After all inline DTD and entity expansion are well-defined XML features.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2017 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/2.7/library/xml.html" class="_attribution-link" target="_blank">https://docs.python.org/2.7/library/xml.html</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
