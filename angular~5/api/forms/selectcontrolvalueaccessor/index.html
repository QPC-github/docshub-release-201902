
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>SelectControlValueAccessor - Angular 5 - W3cubDocs</title>
  
  <meta name="description" content=" directive ">
  <meta name="keywords" content="selectcontrolvalueaccessor, -, angular, angular~5">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/angular~5/api/forms/selectcontrolvalueaccessor/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/angular~5.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/angular~5/" class="_nav-link" title="" style="margin-left:0;">Angular 5</a></span>
  
  <nav class="_nav">
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _angular">
				
				
<h1 id="selectcontrolvalueaccessor">SelectControlValueAccessor</h1> <p><code class="api-type-label directive">directive</code></p>     <table> <tbody> <tr> <th>npm Package</th> <td><a href="https://www.npmjs.com/package/@angular/forms" target="_blank">@angular/forms</a></td> </tr> <tr> <th>Module</th> <td><code>import { <a href="../selectcontrolvalueaccessor/" class="code-anchor">SelectControlValueAccessor</a> } from <a href="../../forms/">'@angular/forms'</a>;</code></td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/angular/angular/tree/5.2.11/packages/forms/src/directives/select_control_value_accessor.ts#L28-L158" target="_blank">forms/src/directives/select_control_value_accessor.ts</a></td> </tr> </tbody> </table> <div class="what-it-does info-banner"> <p>Writes values and listens to changes on a select element.</p> <p>Used by <a href="../ngmodel/"><code>NgModel</code></a>, <a href="../formcontroldirective/"><code>FormControlDirective</code></a>, and <a href="../formcontrolname/"><code>FormControlName</code></a> to keep the view synced with the <a href="../formcontrol/"><code>FormControl</code></a> model.</p> </div>  <h2 id="overview">Overview</h2> <pre data-language="typescript">@Directive({
    selector: 'select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]',
    host: { '(change)': 'onChange($event.target.value)', '(blur)': 'onTouched()' },
    providers: [SELECT_VALUE_ACCESSOR]
})
class SelectControlValueAccessor implements ControlValueAccessor {
  value: any
  onChange: (_: any) =&gt; { }
  onTouched: () =&gt; { }
  set compareWith: (o1: any, o2: any) =&gt; boolean
  writeValue(value: any): void
  registerOnChange(fn: (value: any) =&gt; any): void
  registerOnTouched(fn: () =&gt; any): void
  setDisabledState(isDisabled: boolean): void
}</pre>   <h2 id="how-to-use">How To Use</h2> <p>If you have imported the <a href="../formsmodule/"><code>FormsModule</code></a> or the <a href="../reactiveformsmodule/"><code>ReactiveFormsModule</code></a>, this value accessor will be active on any select control that has a form directive. You do <strong>not</strong> need to add a special selector to activate it.</p> <h3 id="how-to-use-select-controls-with-form-directives">How to use select controls with form directives</h3> <p>To use a select in a template-driven form, simply add an <code><a href="../ngmodel/" class="code-anchor">ngModel</a></code> and a <code>name</code> attribute to the main <code>&lt;select&gt;</code> tag.</p> <p>If your option values are simple strings, you can bind to the normal <code>value</code> property on the option. If your option values happen to be objects (and you'd like to save the selection in your form as an object), use <code>ngValue</code> instead:</p> <pre>import {Component} from '@angular/core';

@Component({
  selector: 'example-app',
  template: `
    &lt;form #f="ngForm"&gt;
      &lt;select name="state" ngModel&gt;
        &lt;option value="" disabled&gt;Choose a state&lt;/option&gt;
        &lt;option *ngFor="let state of states" [ngValue]="state"&gt;
          {{ state.abbrev }}
        &lt;/option&gt;
      &lt;/select&gt;
    &lt;/form&gt;
    
     &lt;p&gt;Form value: {{ f.value | json }}&lt;/p&gt;
     &lt;!-- example value: {state: {name: 'New York', abbrev: 'NY'} } --&gt;
  `,
})
export class SelectControlComp {
  states = [
    {name: 'Arizona', abbrev: 'AZ'},
    {name: 'California', abbrev: 'CA'},
    {name: 'Colorado', abbrev: 'CO'},
    {name: 'New York', abbrev: 'NY'},
    {name: 'Pennsylvania', abbrev: 'PA'},
  ];
}</pre> <p>In reactive forms, you'll also want to add your form directive (<code><a href="../formcontrolname/" class="code-anchor">formControlName</a></code> or <code>formControl</code>) on the main <code>&lt;select&gt;</code> tag. Like in the former example, you have the choice of binding to the <code>value</code> or <code>ngValue</code> property on the select's options.</p> <pre>import {Component} from '@angular/core';
import {FormControl, FormGroup} from '@angular/forms';

@Component({
  selector: 'example-app',
  template: `
    &lt;form [formGroup]="form"&gt;
      &lt;select formControlName="state"&gt;
        &lt;option *ngFor="let state of states" [ngValue]="state"&gt;
          {{ state.abbrev }}
        &lt;/option&gt;
      &lt;/select&gt;
    &lt;/form&gt;
    
     &lt;p&gt;Form value: {{ form.value | json }}&lt;/p&gt; 
     &lt;!-- {state: {name: 'New York', abbrev: 'NY'} } --&gt;
  `,
})
export class ReactiveSelectComp {
  states = [
    {name: 'Arizona', abbrev: 'AZ'},
    {name: 'California', abbrev: 'CA'},
    {name: 'Colorado', abbrev: 'CO'},
    {name: 'New York', abbrev: 'NY'},
    {name: 'Pennsylvania', abbrev: 'PA'},
  ];

  form = new FormGroup({
    state: new FormControl(this.states[3]),
  });
}</pre> <h3 id="caveat-option-selection">Caveat: Option selection</h3> <p>Angular uses object identity to select option. It's possible for the identities of items to change while the data does not. This can happen, for example, if the items are produced from an RPC to the server, and that RPC is re-run. Even if the data hasn't changed, the second response will produce objects with different identities.</p> <p>To customize the default option comparison algorithm, <code>&lt;select&gt;</code> supports <code>compareWith</code> input. <code>compareWith</code> takes a <strong>function</strong> which has two arguments: <code>option1</code> and <code>option2</code>. If <code>compareWith</code> is given, Angular selects option by the return value of the function.</p> <h4 id="syntax">Syntax</h4> <pre>&lt;select [compareWith]="compareFn"  [(ngModel)]="selectedCountries"&gt;
    &lt;option *ngFor="let country of countries" [ngValue]="country"&gt;
        {{country.name}}
    &lt;/option&gt;
&lt;/select&gt;

compareFn(c1: Country, c2: Country): boolean {
    return c1 &amp;&amp; c2 ? c1.id === c2.id : c1 === c2;
}</pre> <p>Note: We listen to the 'change' event because 'input' events aren't fired for selects in Firefox and IE: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1024350" target="_blank">https://bugzilla.mozilla.org/show_bug.cgi?id=1024350</a> <a href="https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/4660045/" target="_blank">https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/4660045/</a></p> <ul> <li>
<strong>npm package</strong>: <code>@angular/forms</code>
</li> </ul>   <h2 id="selectors">Selectors</h2> <h3><code>select:not([multiple])[formControlName]
  select:not([multiple])[formControl]
  select:not([multiple])[ngModel]</code></h3>   <h4 id="inputs">Inputs</h4> <div class="input"> <code>compareWith</code> bound to <code><a href="../selectcontrolvalueaccessor/#compareWith" class="code-anchor">SelectControlValueAccessor.compareWith</a></code> </div>   <h2 id="constructor">Constructor</h2> <div class="constructor">  <h3 data-language="typescript"><code>constructor(_renderer: Renderer2, _elementRef: ElementRef)</code></h3>
</div>   <h2 id="members">Members</h2>   <h3 data-language="typescript"><code>value: any</code></h3>    <h3 data-language="typescript"><code>onChange: (_: any) =&gt; { }</code></h3>    <h3 data-language="typescript"><code>onTouched: () =&gt; { }</code></h3>    <h3 data-language="typescript"><code>set compareWith: (o1: any, o2: any) =&gt; boolean</code></h3>    <h3 data-language="typescript"><code>writeValue(value: any): void</code></h3>    <h3 data-language="typescript"><code>registerOnChange(fn: (value: any) =&gt; any): void</code></h3>    <h3 data-language="typescript"><code>registerOnTouched(fn: () =&gt; any): void</code></h3>    <h3 data-language="typescript"><code>setDisabledState(isDisabled: boolean): void</code></h3>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2018 Google, Inc.<br>Licensed under the Creative Commons Attribution License 4.0.<br>
    <a href="https://v5.angular.io/api/forms/SelectControlValueAccessor" class="_attribution-link" target="_blank">https://v5.angular.io/api/forms/SelectControlValueAccessor</a>
  </p>
</div>

				<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
