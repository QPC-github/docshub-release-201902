
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Template_preprocess_image_style - Drupal 8 - W3cubDocs</title>
  
  <meta name="description" content=" Prepares variables for image style templates. ">
  <meta name="keywords" content="function, template, preprocess, image, style, -, drupal, drupal~8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/drupal~8/core-modules-image-image.module/function/template_preprocess_image_style/8.1.x/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/drupal~8.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/drupal~8/" class="_nav-link" title="" style="margin-left:0;">Drupal 8</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _drupal">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 id="page-subtitle">function template_preprocess_image_style</h1>     <pre class="signature">template_preprocess_image_style(&amp;$variables)</pre> <p>Prepares variables for image style templates.</p> <p>Default template: <a href="../../../../core-modules-image-templates-image-style.html.twig/8.1.x/" title="Default theme implementation for an image using a specific image style." class="local">image-style.html.twig</a>.</p> <h3>Parameters</h3> <p> <strong>array $variables</strong>: An associative array containing:</p> <ul> <li>
<strong>width</strong>: The width of the image.</li> <li>
<strong>height</strong>: The height of the image.</li> <li>
<strong>style_name</strong>: The name of the image style to be applied.</li> <li>
<strong>attributes</strong>: Additional attributes to apply to the image.</li> <li>
<strong>uri</strong>: URI of the source image before styling.</li> <li>
<strong>alt</strong>: The alternative text for text-based browsers. HTML 4 and XHTML 1.0 always require an alt attribute. The HTML 5 draft allows the alt attribute to be omitted in some cases. Therefore, this variable defaults to an empty string, but can be set to NULL for the attribute to be omitted. Usually, neither omission nor an empty string satisfies accessibility requirements, so it is strongly encouraged for code using '#theme' =&gt; 'image_style' to pass a meaningful value for this variable. <ul> <li><a href="http://www.w3.org/TR/REC-html40/struct/objects.html#h-13.8" target="_blank">http://www.w3.org/TR/REC-html40/struct/objects.html#h-13.8</a></li> <li><a href="http://www.w3.org/TR/xhtml1/dtds.html" target="_blank">http://www.w3.org/TR/xhtml1/dtds.html</a></li> <li><a href="http://dev.w3.org/html5/spec/Overview.html#alt" target="_blank">http://dev.w3.org/html5/spec/Overview.html#alt</a></li> </ul> </li> <li>
<strong>title</strong>: The title text is displayed when the image is hovered in some popular browsers.</li> <li>
<strong>attributes</strong>: Associative array of attributes to be placed in the img tag.</li> </ul> <h3>File</h3> 
<dl> <dt>core/modules/image/<a href="../../../8.1.x/">image.module</a>, line 282</dt> <dd>Exposes global functionality for creating image styles.</dd> </dl> <h3>Code</h3> <pre class="php" data-language="php">function template_preprocess_image_style(&amp;$variables) {
  $style = ImageStyle::load($variables['style_name']);

  // Determine the dimensions of the styled image.
  $dimensions = array(
    'width' =&gt; $variables['width'],
    'height' =&gt; $variables['height'],
  );

  $style-&gt;transformDimensions($dimensions, $variables['uri']);

  $variables['image'] = array(
    '#theme' =&gt; 'image',
    '#width' =&gt; $dimensions['width'],
    '#height' =&gt; $dimensions['height'],
    '#attributes' =&gt; $variables['attributes'],
    '#uri' =&gt; $style-&gt;buildUrl($variables['uri']),
    '#style_name' =&gt; $variables['style_name'],
  );

  if (isset($variables['alt']) || array_key_exists('alt', $variables)) {
    $variables['image']['#alt'] = $variables['alt'];
  }
  if (isset($variables['title']) || array_key_exists('title', $variables)) {
    $variables['image']['#title'] = $variables['title'];
  }

}
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/core!modules!image!image.module/function/template_preprocess_image_style/8.1.x" class="_attribution-link" target="_blank">https://api.drupal.org/api/drupal/core!modules!image!image.module/function/template_preprocess_image_style/8.1.x</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
