
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Oneandone_monitoring_policy - Ansible 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.5. ">
  <meta name="keywords" content="oneandone, monitoring, policy, -, configure, &#38;, ansible, ansible~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible~2.7/modules/oneandone_monitoring_policy_module/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/ansible~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.7/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.7</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 id="oneandone-monitoring-policy-module">oneandone_monitoring_policy - Configure 1&amp;1 monitoring policy.</h1> <div class="versionadded" id="oneandone-monitoring-policy-configure-1-1-monitoring-policy"> <p><span class="versionmodified">New in version 2.5.</span></p> </div>  <ul class="simple"> <li>
<a class="reference internal" href="#synopsis" id="id1">Synopsis</a><ul> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> </ul> </li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li><a class="reference internal" href="#status" id="id6">Status</a></li> <li>
<a class="reference internal" href="#maintenance" id="id7">Maintenance</a><ul> <li><a class="reference internal" href="#author" id="id8">Author</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create, remove, update monitoring policies (and add/remove ports, processes, and servers). This module has a dependency on 1and1 &gt;= 1.0</li> </ul>  <h3 id="requirements">Requirements</h3> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>1and1</li> <li>python &gt;= 2.6</li> </ul>    <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2"> <b>add_ports</b> </td> <td> </td> <td> <div>Ports to add to the monitoring policy.</div> </td> </tr> <tr> <td colspan="2"> <b>add_processes</b> </td> <td> </td> <td> <div>Processes to add to the monitoring policy.</div> </td> </tr> <tr> <td colspan="2"> <b>add_servers</b> </td> <td> </td> <td> <div>Servers to add to the monitoring policy.</div> </td> </tr> <tr> <td colspan="2"> <b>agent</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Set true for using agent.</div> </td> </tr> <tr> <td colspan="2"> <b>api_url</b> </td> <td> </td> <td> <div>Custom API URL. Overrides the ONEANDONE_API_URL environement variable.</div> </td> </tr> <tr> <td colspan="2"> <b>auth_token</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Authenticating API token provided by 1&amp;1.</div> </td> </tr> <tr> <td colspan="2"> <b>description</b> </td> <td> </td> <td> <div>Monitoring policy description. maxLength=256</div> </td> </tr> <tr> <td colspan="2"> <b>email</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>User's email. maxLength=128</div> </td> </tr> <tr> <td colspan="2"> <b>monitoring_policy</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>The identifier (id or name) of the monitoring policy used with update state.</div> </td> </tr> <tr> <td colspan="2"> <b>name</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Monitoring policy name used with present state. Used as identifier (id or name) when used with absent state. maxLength=128</div> </td> </tr> <tr> <td colspan="2"> <b>ports</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Array of ports that will be monitoring.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>alert_if</b> <br><div style="font-size: small; color: red">required</div> </td> <td> <ul>
<b>Choices:</b> <li>RESPONDING</li> <li>NOT_RESPONDING</li> </ul> </td> <td> <div>Case of alert.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>email_notification</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Set true for sending e-mail notifications.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>protocol</b> <br><div style="font-size: small; color: red">required</div> </td> <td> <ul>
<b>Choices:</b> <li>TCP</li> <li>UDP</li> </ul> </td> <td> <div>Internet protocol.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>port</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Port number. minimum=1, maximum=65535</div> </td> </tr> <tr> <td colspan="2"> <b>processes</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Array of processes that will be monitoring.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>process</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Name of the process. maxLength=50</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>alert_if</b> <br><div style="font-size: small; color: red">required</div> </td> <td> <ul>
<b>Choices:</b> <li>RUNNING</li> <li>NOT_RUNNING</li> </ul> </td> <td> <div>Case of alert.</div> </td> </tr> <tr> <td colspan="2"> <b>remove_ports</b> </td> <td> </td> <td> <div>Ports to remove from the monitoring policy.</div> </td> </tr> <tr> <td colspan="2"> <b>remove_processes</b> </td> <td> </td> <td> <div>Processes to remove from the monitoring policy.</div> </td> </tr> <tr> <td colspan="2"> <b>remove_servers</b> </td> <td> </td> <td> <div>Servers to remove from the monitoring policy.</div> </td> </tr> <tr> <td colspan="2"> <b>state</b> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>present</b> ←</div></li> <li>absent</li> <li>update</li> </ul> </td> <td> <div>Define a monitoring policy's state to create, remove, update.</div> </td> </tr> <tr> <td colspan="2"> <b>thresholds</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Monitoring policy thresholds. Each of the suboptions have warning and critical, which both have alert and value suboptions. Warning is used to set limits for warning alerts, critical is used to set critical alerts. alert enables alert, and value is used to advise when the value is exceeded.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>transfer</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Consumption limits for transfer.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>disk</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Consumption limits of hard disk.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>ram</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Consumption limits of RAM.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>cpu</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Consumption limits of CPU.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1"> <b>internal_ping</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Response limits of internal ping.</div> </td> </tr> <tr> <td colspan="2"> <b>update_ports</b> </td> <td> </td> <td> <div>Ports to be updated on the monitoring policy.</div> </td> </tr> <tr> <td colspan="2"> <b>update_processes</b> </td> <td> </td> <td> <div>Processes to be updated on the monitoring policy.</div> </td> </tr> <tr> <td colspan="2"> <b>wait</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>wait for the instance to be in state 'running' before returning</div> </td> </tr> <tr> <td colspan="2"> <b>wait_interval</b> </td> <td> <b>Default:</b><br><div style="color: blue">5</div> </td> <td> <div>Defines the number of seconds to wait when using the _wait_for methods</div> </td> </tr> <tr> <td colspan="2"> <b>wait_timeout</b> </td> <td> <b>Default:</b><br><div style="color: blue">600</div> </td> <td> <div>how long before wait gives up, in seconds</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml"># Provisioning example. Create and destroy a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    name: ansible monitoring policy
    description: Testing creation of a monitoring policy with ansible
    email: your@emailaddress.com
    agent: true
    thresholds:
     -
       cpu:
         warning:
           value: 80
           alert: false
         critical:
           value: 92
           alert: false
     -
       ram:
         warning:
           value: 80
           alert: false
         critical:
           value: 90
           alert: false
     -
       disk:
         warning:
           value: 80
           alert: false
         critical:
           value: 90
           alert: false
     -
       internal_ping:
         warning:
           value: 50
           alert: false
         critical:
           value: 100
           alert: false
     -
       transfer:
         warning:
           value: 1000
           alert: false
         critical:
           value: 2000
           alert: false
    ports:
     -
       protocol: TCP
       port: 22
       alert_if: RESPONDING
       email_notification: false
    processes:
     -
       process: test
       alert_if: NOT_RUNNING
       email_notification: false
    wait: true

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    state: absent
    name: ansible monitoring policy

# Update a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy
    name: ansible monitoring policy updated
    description: Testing creation of a monitoring policy with ansible updated
    email: another@emailaddress.com
    thresholds:
     -
       cpu:
         warning:
           value: 70
           alert: false
         critical:
           value: 90
           alert: false
     -
       ram:
         warning:
           value: 70
           alert: false
         critical:
           value: 80
           alert: false
     -
       disk:
         warning:
           value: 70
           alert: false
         critical:
           value: 80
           alert: false
     -
       internal_ping:
         warning:
           value: 60
           alert: false
         critical:
           value: 90
           alert: false
     -
       transfer:
         warning:
           value: 900
           alert: false
         critical:
           value: 1900
           alert: false
    wait: true
    state: update

# Add a port to a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy updated
    add_ports:
     -
       protocol: TCP
       port: 33
       alert_if: RESPONDING
       email_notification: false
    wait: true
    state: update

# Update existing ports of a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy updated
    update_ports:
     -
       id: existing_port_id
       protocol: TCP
       port: 34
       alert_if: RESPONDING
       email_notification: false
     -
       id: existing_port_id
       protocol: TCP
       port: 23
       alert_if: RESPONDING
       email_notification: false
    wait: true
    state: update

# Remove a port from a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy updated
    remove_ports:
     - port_id
    state: update

# Add a process to a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy updated
    add_processes:
     -
       process: test_2
       alert_if: NOT_RUNNING
       email_notification: false
    wait: true
    state: update

# Update existing processes of a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy updated
    update_processes:
     -
       id: process_id
       process: test_1
       alert_if: NOT_RUNNING
       email_notification: false
     -
       id: process_id
       process: test_3
       alert_if: NOT_RUNNING
       email_notification: false
    wait: true
    state: update

# Remove a process from a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy updated
    remove_processes:
     - process_id
    wait: true
    state: update

# Add server to a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy updated
    add_servers:
     - server id or name
    wait: true
    state: update

# Remove server from a monitoring policy.

- oneandone_moitoring_policy:
    auth_token: oneandone_private_api_key
    monitoring_policy: ansible monitoring policy updated
    remove_servers:
     - server01
    wait: true
    state: update
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../reference_appendices/common_return_values/#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1"> <b>monitoring_policy</b> <br><div style="font-size: small; color: red">dict</div> </td> <td>always</td> <td> <div>Information about the monitoring policy that was processed</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">{"id": "92B74394A397ECC3359825C1656D67A6", "name": "Default Policy"}</div> </td> </tr> </table> <br><br>  <h2 id="status">Status</h2> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p>   <h2 id="maintenance">Maintenance</h2> <p>This module is flagged as <strong>community</strong> which means that it is maintained by the Ansible Community. See <a class="reference internal" href="../../user_guide/modules_support/#modules-support"><span class="std std-ref">Module Maintenance &amp; Support</span></a> for more info.</p> <p>For a list of other modules that are also maintained by the Ansible Community, see <a class="reference internal" href="../community_maintained/#community-supported"><span class="std std-ref">here</span></a>.</p>  <h3 id="author">Author</h3> <ul class="simple"> <li>Amel Ajdinovic (@aajdinov)</li> <li>Ethan Devenport (@edevenport)</li> </ul> <div class="admonition hint"> <p class="first admonition-title">Hint</p> <p class="last">If you notice any issues in this documentation you can <a class="reference external" href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/cloud/oneandone/oneandone_monitoring_policy.py?description=%3C!---%20Your%20description%20here%20--%3E%0A%0A%2Blabel:%20docsite_pr" target="_blank">edit this document</a> to improve it.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.7/modules/oneandone_monitoring_policy_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/2.7/modules/oneandone_monitoring_policy_module.html</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
