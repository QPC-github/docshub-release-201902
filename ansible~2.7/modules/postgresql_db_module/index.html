
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Postgresql_db - Ansible 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" The below requirements are needed on the host that executes this module. ">
  <meta name="keywords" content="postgresql, db, -, add, or, remove, databases, from, remote, host, ansible, ansible~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible~2.7/modules/postgresql_db_module/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/ansible~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.7/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.7</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 id="postgresql-db-module">postgresql_db - Add or remove PostgreSQL databases from a remote host.</h1>  <ul class="simple" id="postgresql-db-add-or-remove-postgresql-databases-from-a-remote-host"> <li>
<a class="reference internal" href="#synopsis" id="id1">Synopsis</a><ul> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> </ul> </li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#status" id="id6">Status</a></li> <li>
<a class="reference internal" href="#maintenance" id="id7">Maintenance</a><ul> <li><a class="reference internal" href="#author" id="id8">Author</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Add or remove PostgreSQL databases from a remote host.</li> </ul>  <h3 id="requirements">Requirements</h3> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>psycopg2</li> </ul>    <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1"> <b>encoding</b> </td> <td> </td> <td> <div>Encoding of the database</div> </td> </tr> <tr> <td colspan="1"> <b>lc_collate</b> </td> <td> </td> <td> <div>Collation order (LC_COLLATE) to use in the database. Must match collation order of template database unless <code>template0</code> is used as template.</div> </td> </tr> <tr> <td colspan="1"> <b>lc_ctype</b> </td> <td> </td> <td> <div>Character classification (LC_CTYPE) to use in the database (e.g. lower, upper, ...) Must match LC_CTYPE of template database unless <code>template0</code> is used as template.</div> </td> </tr> <tr> <td colspan="1"> <b>login_host</b> </td> <td> </td> <td> <div>Host running the database</div> </td> </tr> <tr> <td colspan="1"> <b>login_password</b> </td> <td> </td> <td> <div>The password used to authenticate with</div> </td> </tr> <tr> <td colspan="1"> <b>login_unix_socket</b> </td> <td> </td> <td> <div>Path to a Unix domain socket for local connections</div> </td> </tr> <tr> <td colspan="1"> <b>login_user</b> </td> <td> <b>Default:</b><br><div style="color: blue">postgres</div> </td> <td> <div>The username used to authenticate with</div> </td> </tr> <tr> <td colspan="1"> <b>maintenance_db</b> <br><div style="font-size: small; color: darkgreen">(added in 2.5)</div> </td> <td> <b>Default:</b><br><div style="color: blue">postgres</div> </td> <td> <div>The value specifies the initial database (which is also called as maintenance DB) that Ansible connects to.</div> </td> </tr> <tr> <td colspan="1"> <b>name</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>name of the database to add or remove</div> <div style="font-size: small; color: darkgreen">
<br>aliases: db</div> </td> </tr> <tr> <td colspan="1"> <b>owner</b> </td> <td> </td> <td> <div>Name of the role to set as owner of the database</div> </td> </tr> <tr> <td colspan="1"> <b>port</b> </td> <td> <b>Default:</b><br><div style="color: blue">5432</div> </td> <td> <div>Database port to connect to.</div> </td> </tr> <tr> <td colspan="1"> <b>ssl_mode</b> <br><div style="font-size: small; color: darkgreen">(added in 2.3)</div> </td> <td> <ul>
<b>Choices:</b> <li>disable</li> <li>allow</li> <li><div style="color: blue">
<b>prefer</b> ←</div></li> <li>require</li> <li>verify-ca</li> <li>verify-full</li> </ul> </td> <td> <div>Determines whether or with what priority a secure SSL TCP/IP connection will be negotiated with the server.</div> <div>See https://www.postgresql.org/docs/current/static/libpq-ssl.html for more information on the modes.</div> <div>Default of <code>prefer</code> matches libpq default.</div> </td> </tr> <tr> <td colspan="1"> <b>ssl_rootcert</b> <br><div style="font-size: small; color: darkgreen">(added in 2.3)</div> </td> <td> </td> <td> <div>Specifies the name of a file containing SSL certificate authority (CA) certificate(s).</div> <div>If the file exists, the server's certificate will be verified to be signed by one of these authorities.</div> </td> </tr> <tr> <td colspan="1"> <b>state</b> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>present</b> ←</div></li> <li>absent</li> <li>dump</li> <li>restore</li> </ul> </td> <td> <div>The database state. present implies that the database should be created if necessary. absent implies that the database should be removed if present. dump requires a target definition to which the database will be backed up. (Added in 2.4) restore also requires a target definition from which the database will be restored. (Added in 2.4) The format of the backup will be detected based on the target name. Supported compression formats for dump and restore are: .bz2, .gz, and .xz Supported formats for dump and restore are: .sql and .tar</div> </td> </tr> <tr> <td colspan="1"> <b>target</b> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> </td> <td> <div>File to back up or restore from. Used when state is "dump" or "restore"</div> </td> </tr> <tr> <td colspan="1"> <b>target_opts</b> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> </td> <td> <div>Further arguments for pg_dump or pg_restore. Used when state is "dump" or "restore"</div> </td> </tr> <tr> <td colspan="1"> <b>template</b> </td> <td> </td> <td> <div>Template used to create the database</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>The default authentication assumes that you are either logging in as or sudo’ing to the <code>postgres</code> account on the host.</li> <li>This module uses <em>psycopg2</em>, a Python PostgreSQL database adapter. You must ensure that psycopg2 is installed on the host before using this module. If the remote host is the PostgreSQL server (which is the default case), then PostgreSQL must also be installed on the remote host. For Ubuntu-based systems, install the <code>postgresql</code>, <code>libpq-dev</code>, and <code>python-psycopg2</code> packages on the remote host before using this module.</li> <li>The ssl_rootcert parameter requires at least Postgres version 8.4 and <em>psycopg2</em> version 2.4.3.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml"># Create a new database with name "acme"
- postgresql_db:
    name: acme

# Create a new database with name "acme" and specific encoding and locale
# settings. If a template different from "template0" is specified, encoding
# and locale settings must match those of the template.
- postgresql_db:
    name: acme
    encoding: UTF-8
    lc_collate: de_DE.UTF-8
    lc_ctype: de_DE.UTF-8
    template: template0

# Dump an existing database to a file
- postgresql_db:
    name: acme
    state: dump
    target: /tmp/acme.sql

# Dump an existing database to a file (with compression)
- postgresql_db:
    name: acme
    state: dump
    target: /tmp/acme.sql.gz

# Dump a single schema for an existing database
- postgresql_db:
    name: acme
    state: dump
    target: /tmp/acme.sql
    target_opts: "-n public"
</pre>   <h2 id="status">Status</h2> <p>This module is flagged as <strong>stableinterface</strong> which means that the maintainers for this module guarantee that no backward incompatible interface changes will be made.</p>   <h2 id="maintenance">Maintenance</h2> <p>This module is flagged as <strong>community</strong> which means that it is maintained by the Ansible Community. See <a class="reference internal" href="../../user_guide/modules_support/#modules-support"><span class="std std-ref">Module Maintenance &amp; Support</span></a> for more info.</p> <p>For a list of other modules that are also maintained by the Ansible Community, see <a class="reference internal" href="../community_maintained/#community-supported"><span class="std std-ref">here</span></a>.</p>  <h3 id="author">Author</h3> <ul class="simple"> <li>Ansible Core Team</li> </ul> <div class="admonition hint"> <p class="first admonition-title">Hint</p> <p class="last">If you notice any issues in this documentation you can <a class="reference external" href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/database/postgresql/postgresql_db.py?description=%3C!---%20Your%20description%20here%20--%3E%0A%0A%2Blabel:%20docsite_pr" target="_blank">edit this document</a> to improve it.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.7/modules/postgresql_db_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/2.7/modules/postgresql_db_module.html</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
