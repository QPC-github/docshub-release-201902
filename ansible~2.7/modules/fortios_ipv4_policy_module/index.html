
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Fortios_ipv4_policy - Ansible 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.3. ">
  <meta name="keywords" content="fortios, ipv, policy, -, manage, objects, on, fortinet, firewall, devices, ansible, ansible~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible~2.7/modules/fortios_ipv4_policy_module/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/ansible~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.7/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.7</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1 id="fortios-ipv4-policy-module">fortios_ipv4_policy - Manage IPv4 policy objects on Fortinet FortiOS firewall devices</h1> <div class="versionadded" id="fortios-ipv4-policy-manage-ipv4-policy-objects-on-fortinet-fortios-firewall-devices"> <p><span class="versionmodified">New in version 2.3.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li><a class="reference internal" href="#status" id="id6">Status</a></li> <li>
<a class="reference internal" href="#maintenance" id="id7">Maintenance</a><ul> <li><a class="reference internal" href="#author" id="id8">Author</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module provides management of firewall IPv4 policies on FortiOS devices.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1"> <b>application_list</b> </td> <td> </td> <td> <div>Specifies Application Control name.</div> </td> </tr> <tr> <td colspan="1"> <b>av_profile</b> </td> <td> </td> <td> <div>Specifies Antivirus profile name.</div> </td> </tr> <tr> <td colspan="1"> <b>backup</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>This argument will cause the module to create a backup of the current <code>running-config</code> from the remote device before any changes are made. The backup file is written to the i(backup) folder.</div> </td> </tr> <tr> <td colspan="1"> <b>backup_filename</b> </td> <td> </td> <td> <div>Specifies the backup filename. If omitted filename will be formatted like HOST_config.YYYY-MM-DD@HH:MM:SS</div> </td> </tr> <tr> <td colspan="1"> <b>backup_path</b> </td> <td> </td> <td> <div>Specifies where to store backup files. Required if <em>backup=yes</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>comment</b> </td> <td> </td> <td> <div>free text to describe policy.</div> </td> </tr> <tr> <td colspan="1"> <b>config_file</b> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> </td> <td> <div>Path to configuration file. Required when <em>file_mode</em> is True.</div> </td> </tr> <tr> <td colspan="1"> <b>dst_addr</b> </td> <td> </td> <td> <div>Specifies destination address (or group) object name(s). Required when <em>state=present</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>dst_addr_negate</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Negate destination address param.</div> </td> </tr> <tr> <td colspan="1"> <b>dst_intf</b> </td> <td> <b>Default:</b><br><div style="color: blue">any</div> </td> <td> <div>Specifies destination interface name(s).</div> </td> </tr> <tr> <td colspan="1"> <b>file_mode</b> <br><div style="font-size: small; color: red">bool</div> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Don't connect to any device, only use <em>config_file</em> as input and Output.</div> </td> </tr> <tr> <td colspan="1"> <b>fixedport</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Use fixed port for nat.</div> </td> </tr> <tr> <td colspan="1"> <b>host</b> </td> <td> </td> <td> <div>Specifies the DNS hostname or IP address for connecting to the remote fortios device. Required when <em>file_mode</em> is False.</div> </td> </tr> <tr> <td colspan="1"> <b>id</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Policy ID. Warning: policy ID number is different than Policy sequence number. The policy ID is the number assigned at policy creation. The sequence number represents the order in which the Fortigate will evaluate the rule for policy enforcement, and also the order in which rules are listed in the GUI and CLI. These two numbers do not necessarily correlate: this module is based off policy ID. TIP: policy ID can be viewed in the GUI by adding 'ID' to the display columns</div> </td> </tr> <tr> <td colspan="1"> <b>ips_sensor</b> </td> <td> </td> <td> <div>Specifies IPS Sensor profile name.</div> </td> </tr> <tr> <td colspan="1"> <b>logtraffic</b> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> <ul>
<b>Choices:</b> <li>disable</li> <li><div style="color: blue">
<b>utm</b> ←</div></li> <li>all</li> </ul> </td> <td> <div>Logs sessions that matched policy.</div> </td> </tr> <tr> <td colspan="1"> <b>logtraffic_start</b> <br><div style="font-size: small; color: red">bool</div> <br><div style="font-size: small; color: darkgreen">(added in 2.4)</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Logs beginning of session as well.</div> </td> </tr> <tr> <td colspan="1"> <b>nat</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Enable or disable Nat.</div> </td> </tr> <tr> <td colspan="1"> <b>password</b> </td> <td> </td> <td> <div>Specifies the password used to authenticate to the remote device. Required when <em>file_mode</em> is True.</div> </td> </tr> <tr> <td colspan="1"> <b>policy_action</b> </td> <td> <ul>
<b>Choices:</b> <li>accept</li> <li>deny</li> </ul> </td> <td> <div>Specifies accept or deny action policy. Required when <em>state=present</em>.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: action</div> </td> </tr> <tr> <td colspan="1"> <b>poolname</b> </td> <td> </td> <td> <div>Specifies NAT pool name.</div> </td> </tr> <tr> <td colspan="1"> <b>schedule</b> </td> <td> <b>Default:</b><br><div style="color: blue">always</div> </td> <td> <div>defines policy schedule.</div> </td> </tr> <tr> <td colspan="1"> <b>service</b> </td> <td> </td> <td> <div>Specifies policy service(s), could be a list (ex: ['MAIL','DNS']). Required when <em>state=present</em>.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: services</div> </td> </tr> <tr> <td colspan="1"> <b>service_negate</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Negate policy service(s) defined in service value.</div> </td> </tr> <tr> <td colspan="1"> <b>src_addr</b> </td> <td> </td> <td> <div>Specifies source address (or group) object name(s). Required when <em>state=present</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>src_addr_negate</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Negate source address param.</div> </td> </tr> <tr> <td colspan="1"> <b>src_intf</b> </td> <td> <b>Default:</b><br><div style="color: blue">any</div> </td> <td> <div>Specifies source interface name(s).</div> </td> </tr> <tr> <td colspan="1"> <b>state</b> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Specifies if policy <em>id</em> need to be added or deleted.</div> </td> </tr> <tr> <td colspan="1"> <b>timeout</b> </td> <td> <b>Default:</b><br><div style="color: blue">60</div> </td> <td> <div>Timeout in seconds for connecting to the remote device.</div> </td> </tr> <tr> <td colspan="1"> <b>username</b> </td> <td> </td> <td> <div>Configures the username used to authenticate to the remote device. Required when <em>file_mode</em> is True.</div> </td> </tr> <tr> <td colspan="1"> <b>vdom</b> </td> <td> </td> <td> <div>Specifies on which vdom to apply configuration</div> </td> </tr> <tr> <td colspan="1"> <b>webfilter_profile</b> </td> <td> </td> <td> <div>Specifies Webfilter profile name.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>This module requires pyFG library.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml">- name: Allow external DNS call
  fortios_ipv4_policy:
    host: 192.168.0.254
    username: admin
    password: password
    id: 42
    src_addr: internal_network
    dst_addr: all
    service: dns
    nat: True
    state: present
    policy_action: accept
    logtraffic: disable

- name: Public Web
  fortios_ipv4_policy:
    host: 192.168.0.254
    username: admin
    password: password
    id: 42
    src_addr: all
    dst_addr: webservers
    services:
      - http
      - https
    state: present
    policy_action: accept

- name: Some Policy
  fortios_ipv4_policy:
    host: 192.168.0.254
    username: admin
    password: password
    id: 42
    comment: "no comment (created by ansible)"
    src_intf: vl1000
    src_addr:
      - some_serverA
      - some_serverB
    dst_intf:
      - vl2000
      - vl3000
    dst_addr: all
    services:
      - HTTP
      - HTTPS
    nat: True
    state: present
    policy_action: accept
    logtraffic: disable
  tags:
    - policy
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../reference_appendices/common_return_values/#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1"> <b>change_string</b> <br><div style="font-size: small; color: red">string</div> </td> <td>only if config changed</td> <td> <div>The commands executed by the module</div> <br> </td> </tr> <tr> <td colspan="1"> <b>firewall_address_config</b> <br><div style="font-size: small; color: red">string</div> </td> <td>always</td> <td> <div>full firewall addresses config string</div> <br> </td> </tr> <tr> <td colspan="1"> <b>msg_error_list</b> <br><div style="font-size: small; color: red">string</div> </td> <td>only when error</td> <td> <div>List of errors returned by CLI (use -vvv for better readability).</div> <br> </td> </tr> </table> <br><br>  <h2 id="status">Status</h2> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p>   <h2 id="maintenance">Maintenance</h2> <p>This module is flagged as <strong>community</strong> which means that it is maintained by the Ansible Community. See <a class="reference internal" href="../../user_guide/modules_support/#modules-support"><span class="std std-ref">Module Maintenance &amp; Support</span></a> for more info.</p> <p>For a list of other modules that are also maintained by the Ansible Community, see <a class="reference internal" href="../community_maintained/#community-supported"><span class="std std-ref">here</span></a>.</p>  <h3 id="author">Author</h3> <ul class="simple"> <li>Benjamin Jolivot (@bjolivot)</li> </ul> <div class="admonition hint"> <p class="first admonition-title">Hint</p> <p class="last">If you notice any issues in this documentation you can <a class="reference external" href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/network/fortios/fortios_ipv4_policy.py?description=%3C!---%20Your%20description%20here%20--%3E%0A%0A%2Blabel:%20docsite_pr" target="_blank">edit this document</a> to improve it.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.7/modules/fortios_ipv4_policy_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/2.7/modules/fortios_ipv4_policy_module.html</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
