
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Openssl_certificate - Ansible 2.7 - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.4. ">
  <meta name="keywords" content="openssl, certificate, -, generate, and, or, check, certificates, ansible, ansible~2.7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible~2.7/modules/openssl_certificate_module/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/ansible~2.7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2572770204602497",
            enable_page_level_ads: true
        });
  </script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.7/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.7</a></span>
  
  <nav class="_nav">
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
				
<h1 id="openssl-certificate-module">openssl_certificate - Generate and/or check OpenSSL certificates</h1> <div class="versionadded" id="openssl-certificate-generate-and-or-check-openssl-certificates"> <p><span class="versionmodified">New in version 2.4.</span></p> </div>  <ul class="simple"> <li>
<a class="reference internal" href="#synopsis" id="id1">Synopsis</a><ul> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> </ul> </li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> <li><a class="reference internal" href="#status" id="id7">Status</a></li> <li>
<a class="reference internal" href="#maintenance" id="id8">Maintenance</a><ul> <li><a class="reference internal" href="#author" id="id9">Author</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module allows one to (re)generate OpenSSL certificates. It implements a notion of provider (ie. <code>selfsigned</code>, <code>ownca</code>, <code>acme</code>, <code>assertonly</code>) for your certificate. The ‘assertonly’ provider is intended for use cases where one is only interested in checking properties of a supplied certificate. The ‘ownca’ provider is intended for generate OpenSSL certificate signed with your own CA (Certificate Authority) certificate (self-signed certificate). Many properties that can be specified in this module are for validation of an existing or newly generated certificate. The proper place to specify them, if you want to receive a certificate with these properties is a CSR (Certificate Signing Request). It uses the pyOpenSSL python library to interact with OpenSSL.</li> </ul>  <h3 id="requirements">Requirements</h3> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python-pyOpenSSL &gt;= 0.15 (if using <code>selfsigned</code> or <code>assertonly</code> provider)</li> <li>acme-tiny (if using the <code>acme</code> provider)</li> </ul>    <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1"> <b>acme_accountkey_path</b> </td> <td> </td> <td> <div>Path to the accountkey for the <code>acme</code> provider</div> </td> </tr> <tr> <td colspan="1"> <b>acme_chain</b> <br><div style="font-size: small; color: darkgreen">(added in 2.5)</div> </td> <td> <b>Default:</b><br><div style="color: blue">yes</div> </td> <td> <div>Include the intermediate certificate to the generated certificate</div> </td> </tr> <tr> <td colspan="1"> <b>acme_challenge_path</b> </td> <td> </td> <td> <div>Path to the ACME challenge directory that is served on <a href="#">http://&lt;HOST&gt;:80/.well-known/acme-challenge/</a>
</div> </td> </tr> <tr> <td colspan="1"> <b>attributes</b> <br><div style="font-size: small; color: darkgreen">(added in 2.3)</div> </td> <td> </td> <td> <div>Attributes the file or directory should have. To get supported flags look at the man page for <em>chattr</em> on the target system. This string should contain the attributes in the same order as the one displayed by <em>lsattr</em>.</div> <div>
<code>=</code> operator is assumed as default, otherwise <code>+</code> or <code>-</code> operators need to be included in the string.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: attr</div> </td> </tr> <tr> <td colspan="1"> <b>csr_path</b> </td> <td> </td> <td> <div>Path to the Certificate Signing Request (CSR) used to generate this certificate. This is not required in <code>assertonly</code> mode.</div> </td> </tr> <tr> <td colspan="1"> <b>extended_key_usage</b> </td> <td> </td> <td> <div>The <em>extended_key_usage</em> extension field must contain all these values.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: extendedKeyUsage</div> </td> </tr> <tr> <td colspan="1"> <b>extended_key_usage_strict</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If set to True, the <em>extended_key_usage</em> extension field must contain only these values.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: extendedKeyUsage_strict</div> </td> </tr> <tr> <td colspan="1"> <b>force</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Generate the certificate, even if it already exists.</div> </td> </tr> <tr> <td colspan="1"> <b>group</b> </td> <td> </td> <td> <div>Name of the group that should own the file/directory, as would be fed to <em>chown</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>has_expired</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Checks if the certificate is expired/not expired at the time the module is executed.</div> </td> </tr> <tr> <td colspan="1"> <b>invalid_at</b> </td> <td> </td> <td> <div>The certificate must be invalid at this point in time. The timestamp is formatted as an ASN.1 TIME.</div> </td> </tr> <tr> <td colspan="1"> <b>issuer</b> </td> <td> </td> <td> <div>Key/value pairs that must be present in the issuer name field of the certificate. If you need to specify more than one value with the same key, use a list as value.</div> </td> </tr> <tr> <td colspan="1"> <b>issuer_strict</b> <br><div style="font-size: small; color: red">bool</div> <br><div style="font-size: small; color: darkgreen">(added in 2.5)</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If set to True, the <em>issuer</em> field must contain only these values.</div> </td> </tr> <tr> <td colspan="1"> <b>key_usage</b> </td> <td> </td> <td> <div>The <em>key_usage</em> extension field must contain all these values.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: keyUsage</div> </td> </tr> <tr> <td colspan="1"> <b>key_usage_strict</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If set to True, the <em>key_usage</em> extension field must contain only these values.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: keyUsage_strict</div> </td> </tr> <tr> <td colspan="1"> <b>mode</b> </td> <td> </td> <td> <div>Mode the file or directory should be. For those used to <em>/usr/bin/chmod</em> remember that modes are actually octal numbers. You must either add a leading zero so that Ansible's YAML parser knows it is an octal number (like <code>0644</code> or <code>01777</code>) or quote it (like <code>'644'</code> or <code>'1777'</code>) so Ansible receives a string and can do its own conversion from string into number. Giving Ansible a number without following one of these rules will end up with a decimal number which will have unexpected results. As of version 1.8, the mode may be specified as a symbolic mode (for example, <code>u+rwx</code> or <code>u=rw,g=r,o=r</code>).</div> </td> </tr> <tr> <td colspan="1"> <b>not_after</b> </td> <td> </td> <td> <div>The certificate must expire at this point in time. The timestamp is formatted as an ASN.1 TIME.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: notAfter</div> </td> </tr> <tr> <td colspan="1"> <b>not_before</b> </td> <td> </td> <td> <div>The certificate must start to become valid at this point in time. The timestamp is formatted as an ASN.1 TIME.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: notBefore</div> </td> </tr> <tr> <td colspan="1"> <b>ownca_digest</b> <br><div style="font-size: small; color: darkgreen">(added in 2.7)</div> </td> <td> <b>Default:</b><br><div style="color: blue">sha256</div> </td> <td> <div>Digest algorithm to be used for the <code>ownca</code> certificate.</div> </td> </tr> <tr> <td colspan="1"> <b>ownca_not_after</b> <br><div style="font-size: small; color: darkgreen">(added in 2.7)</div> </td> <td> </td> <td> <div>The timestamp at which the certificate stops being valid. The timestamp is formatted as an ASN.1 TIME. If this value is not specified, certificate will stop being valid 10 years from now.</div> </td> </tr> <tr> <td colspan="1"> <b>ownca_not_before</b> <br><div style="font-size: small; color: darkgreen">(added in 2.7)</div> </td> <td> </td> <td> <div>The timestamp at which the certificate starts being valid. The timestamp is formatted as an ASN.1 TIME. If this value is not specified, certificate will start being valid from now.</div> </td> </tr> <tr> <td colspan="1"> <b>ownca_path</b> <br><div style="font-size: small; color: darkgreen">(added in 2.7)</div> </td> <td> </td> <td> <div>Remote absolute path of the CA (Certificate Authority) certificate.</div> </td> </tr> <tr> <td colspan="1"> <b>ownca_privatekey_passphrase</b> <br><div style="font-size: small; color: darkgreen">(added in 2.7)</div> </td> <td> </td> <td> <div>The passphrase for the <em>ownca_privatekey_path</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>ownca_privatekey_path</b> <br><div style="font-size: small; color: darkgreen">(added in 2.7)</div> </td> <td> </td> <td> <div>Path to the CA (Certificate Authority) private key to use when signing the certificate.</div> </td> </tr> <tr> <td colspan="1"> <b>ownca_version</b> <br><div style="font-size: small; color: darkgreen">(added in 2.7)</div> </td> <td> <b>Default:</b><br><div style="color: blue">3</div> </td> <td> <div>Version of the <code>ownca</code> certificate. Nowadays it should almost always be <code>3</code>.</div> </td> </tr> <tr> <td colspan="1"> <b>owner</b> </td> <td> </td> <td> <div>Name of the user that should own the file/directory, as would be fed to <em>chown</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>path</b> <br><div style="font-size: small; color: red">required</div> </td> <td> </td> <td> <div>Remote absolute path where the generated certificate file should be created or is already located.</div> </td> </tr> <tr> <td colspan="1"> <b>privatekey_passphrase</b> </td> <td> </td> <td> <div>The passphrase for the <em>privatekey_path</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>privatekey_path</b> </td> <td> </td> <td> <div>Path to the private key to use when signing the certificate.</div> </td> </tr> <tr> <td colspan="1"> <b>provider</b> <br><div style="font-size: small; color: red">required</div> </td> <td> <ul>
<b>Choices:</b> <li>selfsigned</li> <li>ownca</li> <li>assertonly</li> <li>acme</li> </ul> </td> <td> <div>Name of the provider to use to generate/retrieve the OpenSSL certificate. The <code>assertonly</code> provider will not generate files and fail if the certificate file is missing.</div> </td> </tr> <tr> <td colspan="1"> <b>selevel</b> </td> <td> <b>Default:</b><br><div style="color: blue">s0</div> </td> <td> <div>Level part of the SELinux file context. This is the MLS/MCS attribute, sometimes known as the <code>range</code>. <code>_default</code> feature works as for <em>seuser</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>selfsigned_digest</b> </td> <td> <b>Default:</b><br><div style="color: blue">sha256</div> </td> <td> <div>Digest algorithm to be used when self-signing the certificate</div> </td> </tr> <tr> <td colspan="1"> <b>selfsigned_not_after</b> </td> <td> </td> <td> <div>The timestamp at which the certificate stops being valid. The timestamp is formatted as an ASN.1 TIME. If this value is not specified, certificate will stop being valid 10 years from now.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: selfsigned_notAfter</div> </td> </tr> <tr> <td colspan="1"> <b>selfsigned_not_before</b> </td> <td> </td> <td> <div>The timestamp at which the certificate starts being valid. The timestamp is formatted as an ASN.1 TIME. If this value is not specified, certificate will start being valid from now.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: selfsigned_notBefore</div> </td> </tr> <tr> <td colspan="1"> <b>selfsigned_version</b> <br><div style="font-size: small; color: darkgreen">(added in 2.5)</div> </td> <td> <b>Default:</b><br><div style="color: blue">3</div> </td> <td> <div>Version of the <code>selfsigned</code> certificate. Nowadays it should almost always be <code>3</code>.</div> </td> </tr> <tr> <td colspan="1"> <b>serole</b> </td> <td> </td> <td> <div>Role part of SELinux file context, <code>_default</code> feature works as for <em>seuser</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>setype</b> </td> <td> </td> <td> <div>Type part of SELinux file context, <code>_default</code> feature works as for <em>seuser</em>.</div> </td> </tr> <tr> <td colspan="1"> <b>seuser</b> </td> <td> </td> <td> <div>User part of SELinux file context. Will default to system policy, if applicable. If set to <code>_default</code>, it will use the <code>user</code> portion of the policy if available.</div> </td> </tr> <tr> <td colspan="1"> <b>signature_algorithms</b> </td> <td> </td> <td> <div>list of algorithms that you would accept the certificate to be signed with (e.g. ['sha256WithRSAEncryption', 'sha512WithRSAEncryption']).</div> </td> </tr> <tr> <td colspan="1"> <b>state</b> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Whether the certificate should exist or not, taking action if the state is different from what is stated.</div> </td> </tr> <tr> <td colspan="1"> <b>subject</b> </td> <td> </td> <td> <div>Key/value pairs that must be present in the subject name field of the certificate. If you need to specify more than one value with the same key, use a list as value.</div> </td> </tr> <tr> <td colspan="1"> <b>subject_alt_name</b> </td> <td> </td> <td> <div>The <em>subject_alt_name</em> extension field must contain these values.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: subjectAltName</div> </td> </tr> <tr> <td colspan="1"> <b>subject_alt_name_strict</b> <br><div style="font-size: small; color: red">bool</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If set to True, the <em>subject_alt_name</em> extension field must contain only these values.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: subjectAltName_strict</div> </td> </tr> <tr> <td colspan="1"> <b>subject_strict</b> <br><div style="font-size: small; color: red">bool</div> <br><div style="font-size: small; color: darkgreen">(added in 2.5)</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If set to True, the <em>subject</em> field must contain only these values.</div> </td> </tr> <tr> <td colspan="1"> <b>unsafe_writes</b> <br><div style="font-size: small; color: red">bool</div> <br><div style="font-size: small; color: darkgreen">(added in 2.2)</div> </td> <td> <ul>
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>By default this module uses atomic operations to prevent data corruption or inconsistent reads from the target files, but sometimes systems are configured or just broken in ways that prevent this. One example is docker mounted files, which cannot be updated atomically from inside the container and can only be written in an unsafe manner.</div> <div>This option allows Ansible to fall back to unsafe methods of updating files when atomic operations fail (however, it doesn't force Ansible to perform unsafe writes). IMPORTANT! Unsafe writes are subject to race conditions and can lead to data corruption.</div> </td> </tr> <tr> <td colspan="1"> <b>valid_at</b> </td> <td> </td> <td> <div>The certificate must be valid at this point in time. The timestamp is formatted as an ASN.1 TIME.</div> </td> </tr> <tr> <td colspan="1"> <b>valid_in</b> </td> <td> </td> <td> <div>The certificate must still be valid in <em>valid_in</em> seconds from now.</div> </td> </tr> <tr> <td colspan="1"> <b>version</b> </td> <td> </td> <td> <div>Version of the certificate. Nowadays it should almost always be 3.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>All ASN.1 TIME values should be specified following the YYYYMMDDHHMMSSZ pattern. Date specified should be UTC. Minutes and seconds are mandatory.</li> <li>For security reason, when you use <code>ownca</code> provider, you should NOT run <a class="reference internal" href="#openssl-certificate-module"><span class="std std-ref">openssl_certificate</span></a> on a target machine, but on a dedicated CA machine. It is recommended not to store the CA private key on the target machine. Once signed, the certificate can be moved to the target machine.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml">- name: Generate a Self Signed OpenSSL certificate
  openssl_certificate:
    path: /etc/ssl/crt/ansible.com.crt
    privatekey_path: /etc/ssl/private/ansible.com.pem
    csr_path: /etc/ssl/csr/ansible.com.csr
    provider: selfsigned

- name: Generate an OpenSSL certificate signed with your own CA certificate
  openssl_certificate:
    path: /etc/ssl/crt/ansible.com.crt
    csr_path: /etc/ssl/csr/ansible.com.csr
    ownca_path: /etc/ssl/crt/ansible_CA.crt
    ownca_privatekey_path: /etc/ssl/private/ansible_CA.pem
    provider: ownca

- name: Generate a Let's Encrypt Certificate
  openssl_certificate:
    path: /etc/ssl/crt/ansible.com.crt
    csr_path: /etc/ssl/csr/ansible.com.csr
    provider: acme
    acme_accountkey_path: /etc/ssl/private/ansible.com.pem
    acme_challenge_path: /etc/ssl/challenges/ansible.com/

- name: Force (re-)generate a new Let's Encrypt Certificate
  openssl_certificate:
    path: /etc/ssl/crt/ansible.com.crt
    csr_path: /etc/ssl/csr/ansible.com.csr
    provider: acme
    acme_accountkey_path: /etc/ssl/private/ansible.com.pem
    acme_challenge_path: /etc/ssl/challenges/ansible.com/
    force: True

# Examples for some checks one could use the assertonly provider for:

# How to use the assertonly provider to implement and trigger your own custom certificate generation workflow:
- name: Check if a certificate is currently still valid, ignoring failures
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    has_expired: False
  ignore_errors: True
  register: validity_check

- name: Run custom task(s) to get a new, valid certificate in case the initial check failed
  command: superspecialSSL recreate /etc/ssl/crt/example.com.crt
  when: validity_check.failed

- name: Check the new certificate again for validity with the same parameters, this time failing the play if it is still invalid
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    has_expired: False
  when: validity_check.failed

# Some other checks that assertonly could be used for:
- name: Verify that an existing certificate was issued by the Let's Encrypt CA and is currently still valid
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    issuer:
      O: Let's Encrypt
    has_expired: False

- name: Ensure that a certificate uses a modern signature algorithm (no SHA1, MD5 or DSA)
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    signature_algorithms:
      - sha224WithRSAEncryption
      - sha256WithRSAEncryption
      - sha384WithRSAEncryption
      - sha512WithRSAEncryption
      - sha224WithECDSAEncryption
      - sha256WithECDSAEncryption
      - sha384WithECDSAEncryption
      - sha512WithECDSAEncryption

- name: Ensure that the existing certificate belongs to the specified private key
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    privatekey_path: /etc/ssl/private/example.com.pem
    provider: assertonly

- name: Ensure that the existing certificate is still valid at the winter solstice 2017
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    valid_at: 20171221162800Z

- name: Ensure that the existing certificate is still valid 2 weeks (1209600 seconds) from now
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    valid_in: 1209600

- name: Ensure that the existing certificate is only used for digital signatures and encrypting other keys
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    key_usage:
      - digitalSignature
      - keyEncipherment
    key_usage_strict: true

- name: Ensure that the existing certificate can be used for client authentication
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    extended_key_usage:
      - clientAuth

- name: Ensure that the existing certificate can only be used for client authentication and time stamping
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    extended_key_usage:
      - clientAuth
      - 1.3.6.1.5.5.7.3.8
    extended_key_usage_strict: true

- name: Ensure that the existing certificate has a certain domain in its subjectAltName
  openssl_certificate:
    path: /etc/ssl/crt/example.com.crt
    provider: assertonly
    subject_alt_name:
      - www.example.com
      - test.example.com
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../reference_appendices/common_return_values/#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1"> <b>filename</b> <br><div style="font-size: small; color: red">string</div> </td> <td>changed or success</td> <td> <div>Path to the generated Certificate</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">/etc/ssl/crt/www.ansible.com.crt</div> </td> </tr> </table> <br><br>  <h2 id="status">Status</h2> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p>   <h2 id="maintenance">Maintenance</h2> <p>This module is flagged as <strong>community</strong> which means that it is maintained by the Ansible Community. See <a class="reference internal" href="../../user_guide/modules_support/#modules-support"><span class="std std-ref">Module Maintenance &amp; Support</span></a> for more info.</p> <p>For a list of other modules that are also maintained by the Ansible Community, see <a class="reference internal" href="../community_maintained/#community-supported"><span class="std std-ref">here</span></a>.</p>  <h3 id="author">Author</h3> <ul class="simple"> <li>Yanis Guenane (@Spredzy)</li> <li>Markus Teufelberger (@MarkusTeufelberger)</li> </ul> <div class="admonition hint"> <p class="first admonition-title">Hint</p> <p class="last">If you notice any issues in this documentation you can <a class="reference external" href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/crypto/openssl_certificate.py?description=%3C!---%20Your%20description%20here%20--%3E%0A%0A%2Blabel:%20docsite_pr" target="_blank">edit this document</a> to improve it.</p> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.7/modules/openssl_certificate_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/2.7/modules/openssl_certificate_module.html</a>
  </p>
</div>

				<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
</amp-auto-ads>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
