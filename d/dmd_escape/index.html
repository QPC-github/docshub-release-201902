
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>dmd.escape - D - W3cubDocs</title>
  
  <meta name="description" content=" Compiler implementation of the D programming language. ">
  <meta name="keywords" content="dmd, escape, -, d">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/d/dmd_escape/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-6cc8ff3c95d062e2cd87636799240e79e4553263ad7de9cda9464063203db436.css" integrity="sha256-bMj/PJXQYuLNh2NnmSQOeeRVMmOtfenNqUZAYyA9tDY=" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha256-JOOcjTvTbt5QE9AmOH1rrXz8aKKfHMsOthbsjt9CNfk=" crossorigin="anonymous" src="/assets/application-24e39c8d3bd36ede5013d026387d6bad7cfc68a29f1ccb0eb616ec8edf4235f9.js"></script>
  <script src="/json/d.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/d/" class="_nav-link" title="" style="margin-left:0;">D</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _d">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档开头内嵌 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="8852552735"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
				
<h1>dmd.escape</h1>  <p>Compiler implementation of the <a href="http://www.dlang.org" target="_blank">D programming language</a>. </p>
<dl>
<dt>Authors:</dt>
<dd>
<a href="http://www.digitalmars.com" target="_blank">Walter Bright</a> </dd>
</dl> <dl>
<dt>License:</dt>
<dd>
<a href="http://www.boost.org/LICENSE_1_0.txt" target="_blank">Boost License 1.0</a> </dd>
</dl> <dl>
<dt>Source</dt>
<dd> <a href="https://github.com/dlang/dmd/blob/master/src/dmd/escape.d" target="_blank">escape.d</a> </dd>
</dl> <dl>
<dt>Documentation</dt>
<dd> <a href="../dmd_escape/">https://dlang.org/phobos/dmd_escape.html</a> </dd>
</dl> <dl>
<dt>Coverage</dt>
<dd> <a href="https://codecov.io/gh/dlang/dmd/src/master/src/dmd/escape.d" target="_blank">https://codecov.io/gh/dlang/dmd/src/master/src/dmd/escape.d</a>
</dd>
</dl> <dl>
<dt class="d_decl" id="checkArrayLiteralEscape">bool <strong id="checkArrayLiteralEscape">checkArrayLiteralEscape</strong>(Scope* sc, ArrayLiteralExp ae, bool gag); </dt> <dd>
<p>Array literal is going to be allocated on the GC heap. Check its elements to see if any would escape by going on the heap. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>Scope* <code>sc</code>
</td> <td>used to determine current function and module</td>
</tr> <tr>
<td>ArrayLiteralExp <code>ae</code>
</td> <td>array literal expression</td>
</tr> <tr>
<td>bool <code>gag</code>
</td> <td>do not print error messages</td>
</tr> </table></dd>
</dl> <dl>
<dt>Returns:</dt>
<dd>true if any elements escaped</dd>
</dl> </dd> <dt class="d_decl" id="checkAssocArrayLiteralEscape">bool <strong id="checkAssocArrayLiteralEscape">checkAssocArrayLiteralEscape</strong>(Scope* sc, AssocArrayLiteralExp ae, bool gag); </dt> <dd>
<p>Associative array literal is going to be allocated on the GC heap. Check its elements to see if any would escape by going on the heap. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>Scope* <code>sc</code>
</td> <td>used to determine current function and module</td>
</tr> <tr>
<td>AssocArrayLiteralExp <code>ae</code>
</td> <td>associative array literal expression</td>
</tr> <tr>
<td>bool <code>gag</code>
</td> <td>do not print error messages</td>
</tr> </table></dd>
</dl> <dl>
<dt>Returns:</dt>
<dd>true if any elements escaped</dd>
</dl> </dd> <dt class="d_decl" id="checkParamArgumentEscape">bool <strong id="checkParamArgumentEscape">checkParamArgumentEscape</strong>(Scope* sc, FuncDeclaration fdc, Identifier par, Expression arg, bool gag); </dt> <dd>
<p>Function parameter par is being initialized to arg, and par may escape. Detect if scoped values can escape this way. Print error messages when these are detected. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>Scope* <code>sc</code>
</td> <td>used to determine current function and module</td>
</tr> <tr>
<td>FuncDeclaration <code>fdc</code>
</td> <td>function being called, <code>null</code> if called indirectly</td>
</tr> <tr>
<td>Identifier <code>par</code>
</td> <td>identifier of function parameter</td>
</tr> <tr>
<td>Expression <code>arg</code>
</td> <td>initializer for param</td>
</tr> <tr>
<td>bool <code>gag</code>
</td> <td>do not print error messages</td>
</tr> </table></dd>
</dl> <dl>
<dt>Returns:</dt>
<dd>true if pointers to the stack can escape via assignment</dd>
</dl> </dd> <dt class="d_decl" id="checkAssignEscape">bool <strong id="checkAssignEscape">checkAssignEscape</strong>(Scope* sc, Expression e, bool gag); </dt> <dd>
<p>Given an AssignExp, determine if the lvalue will cause the contents of the rvalue to escape. Print error messages when these are detected. Infer 'scope' for the lvalue where possible, in order to eliminate the error. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>Scope* <code>sc</code>
</td> <td>used to determine current function and module</td>
</tr> <tr>
<td>Expression <code>e</code>
</td> <td>AssignExp or CatAssignExp to check for any pointers to the stack</td>
</tr> <tr>
<td>bool <code>gag</code>
</td> <td>do not print error messages</td>
</tr> </table></dd>
</dl> <dl>
<dt>Returns:</dt>
<dd>true if pointers to the stack can escape via assignment</dd>
</dl> </dd> <dt class="d_decl" id="checkThrowEscape">bool <strong id="checkThrowEscape">checkThrowEscape</strong>(Scope* sc, Expression e, bool gag); </dt> <dd>
<p>Detect cases where pointers to the stack can 'escape' the lifetime of the stack frame when throwing <code>e</code>. Print error messages when these are detected. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>Scope* <code>sc</code>
</td> <td>used to determine current function and module</td>
</tr> <tr>
<td>Expression <code>e</code>
</td> <td>expression to check for any pointers to the stack</td>
</tr> <tr>
<td>bool <code>gag</code>
</td> <td>do not print error messages</td>
</tr> </table></dd>
</dl> <dl>
<dt>Returns:</dt>
<dd>true if pointers to the stack can escape</dd>
</dl> </dd> <dt class="d_decl" id="checkNewEscape">bool <strong id="checkNewEscape">checkNewEscape</strong>(Scope* sc, Expression e, bool gag); </dt> <dd>
<p>Detect cases where pointers to the stack can 'escape' the lifetime of the stack frame by being placed into a GC allocated object. Print error messages when these are detected. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>Scope* <code>sc</code>
</td> <td>used to determine current function and module</td>
</tr> <tr>
<td>Expression <code>e</code>
</td> <td>expression to check for any pointers to the stack</td>
</tr> <tr>
<td>bool <code>gag</code>
</td> <td>do not print error messages</td>
</tr> </table></dd>
</dl> <dl>
<dt>Returns:</dt>
<dd>true if pointers to the stack can escape</dd>
</dl> </dd> <dt class="d_decl" id="checkReturnEscape">bool <strong id="checkReturnEscape">checkReturnEscape</strong>(Scope* sc, Expression e, bool gag); </dt> <dd>
<p>Detect cases where pointers to the stack can 'escape' the lifetime of the stack frame by returning 'e' by value. Print error messages when these are detected. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>Scope* <code>sc</code>
</td> <td>used to determine current function and module</td>
</tr> <tr>
<td>Expression <code>e</code>
</td> <td>expression to check for any pointers to the stack</td>
</tr> <tr>
<td>bool <code>gag</code>
</td> <td>do not print error messages</td>
</tr> </table></dd>
</dl> <dl>
<dt>Returns:</dt>
<dd>true if pointers to the stack can escape</dd>
</dl> </dd> <dt class="d_decl" id="checkReturnEscapeRef">bool <strong id="checkReturnEscapeRef">checkReturnEscapeRef</strong>(Scope* sc, Expression e, bool gag); </dt> <dd>
<p>Detect cases where returning 'e' by ref can result in a reference to the stack being returned. Print error messages when these are detected. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>Scope* <code>sc</code>
</td> <td>used to determine current function and module</td>
</tr> <tr>
<td>Expression <code>e</code>
</td> <td>expression to check</td>
</tr> <tr>
<td>bool <code>gag</code>
</td> <td>do not print error messages</td>
</tr> </table></dd>
</dl> <dl>
<dt>Returns:</dt>
<dd>true if references to the stack can escape</dd>
</dl> </dd> <dt class="d_decl" id="findAllOuterAccessedVariables">void <strong id="findAllOuterAccessedVariables">findAllOuterAccessedVariables</strong>(FuncDeclaration fd, VarDeclarations* vars); </dt> <dd>
<p>Find all variables accessed by this delegate that are in functions enclosing it. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>FuncDeclaration <code>fd</code>
</td> <td>function</td>
</tr> <tr>
<td>VarDeclarations* <code>vars</code>
</td> <td>array to append found variables to</td>
</tr> </table></dd>
</dl> </dd> <dt class="d_decl" id="notMaybeScope">void <strong id="notMaybeScope">notMaybeScope</strong>(VarDeclaration v); </dt> <dd>
<p>Turn off STC.maybescope for variable <code>v</code>. This exists in order to find where STC.maybescope is getting turned off. </p>
<dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>VarDeclaration <code>v</code>
</td> <td>variable</td>
</tr> </table></dd>
</dl> </dd> <dt class="d_decl" id="eliminateMaybeScopes">void <strong id="eliminateMaybeScopes">eliminateMaybeScopes</strong>(VarDeclaration[] array); </dt> <dd>
<p>Have some variables that are maybescopes that were assigned values from other maybescope variables. Now that semantic analysis of the function is complete, we can finalize this by turning off maybescope for array elements that cannot be scope. </p>
<p> <code>va</code> <code>v</code> =&gt; <code>va</code> <code>v</code> maybe maybe =&gt; scope scope scope scope =&gt; scope scope scope maybe =&gt; scope scope maybe scope =&gt; scope scope - - =&gt; - - - maybe =&gt; - - - scope =&gt; error maybe - =&gt; scope - scope - =&gt; scope - </p> <dl>
<dt>Parameters:</dt>
<dd><table>
<tr>
<td>VarDeclaration[] <code>array</code>
</td> <td>array of variables that were assigned to from maybescope variables</td>
</tr> </table></dd>
</dl> </dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    © 1999–2018 The D Language Foundation<br>Licensed under the Boost License 1.0.<br>
    <a href="https://dlang.org/phobos/dmd_escape.html" class="_attribution-link" target="_blank">https://dlang.org/phobos/dmd_escape.html</a>
  </p>
</div>

				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文档结尾内嵌 -->
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-2572770204602497"
    data-ad-slot="5446239318"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
